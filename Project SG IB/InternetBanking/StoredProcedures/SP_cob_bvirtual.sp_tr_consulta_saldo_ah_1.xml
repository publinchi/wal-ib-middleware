<?xml version="1.0" encoding="utf-8"?>
<procedure>
  <database>cob_bvirtual</database>
  <name>sp_tr_consulta_saldo_ah</name>
  <type>SQLSERVER</type>
  <version>1</version>
  <parameters>
    <parameter name="@t_ejec" dataType="char" direction="in" />
    <parameter name="@t_corr" dataType="char" direction="in" />
    <parameter name="@t_rty" dataType="char" direction="in" />
    <parameter name="@t_trn" dataType="int" direction="in" />
    <parameter name="@t_filial" dataType="smallint" direction="in" />
    <parameter name="@t_aut" dataType="char" direction="in" />
    <parameter name="@t_tsn_aut" dataType="int" direction="in" />
    <parameter name="@t_online" dataType="char" direction="in" />
    <parameter name="@t_login_aut" dataType="varchar" direction="in" />
    <parameter name="@r_sld_disp" dataType="money" direction="in" />
    <parameter name="@r_sld_cont" dataType="money" direction="in" />
    <parameter name="@r_sld_girar" dataType="money" direction="in" />
    <parameter name="@r_sld_12h" dataType="money" direction="in" />
    <parameter name="@r_sld_24h" dataType="money" direction="in" />
    <parameter name="@r_sld_rem" dataType="money" direction="in" />
    <parameter name="@r_monto_blq" dataType="money" direction="in" />
    <parameter name="@r_num_bloq" dataType="int" direction="in" />
    <parameter name="@r_num_blqmonto" dataType="int" direction="in" />
    <parameter name="@r_ofi_cta" dataType="smallint" direction="in" />
    <parameter name="@r_pro_ban" dataType="smallint" direction="in" />
    <parameter name="@r_estado" dataType="char" direction="in" />
    <parameter name="@r_ssn_host" dataType="int" direction="in" />
    <parameter name="@r_monto_sob" dataType="money" direction="in" />
    <parameter name="@r_fecha_host" dataType="datetime" direction="in" />
    <parameter name="@r_nombre" dataType="varchar" direction="in" />
    <parameter name="@r_fecha_ultmov" dataType="char" direction="in" />
    <parameter name="@r_estado_cta" dataType="char" direction="in" />
    <parameter name="@i_prod" dataType="tinyint" direction="in" />
    <parameter name="@i_mon" dataType="smallint" direction="in" />
    <parameter name="@i_login" dataType="varchar" direction="in" />
    <parameter name="@i_valor_trn" dataType="money" direction="in" />
    <parameter name="@i_cuenta_dst" dataType="varchar" direction="in" />
    <parameter name="@i_graba_log" dataType="char" direction="in" />
    <parameter name="@i_cta" dataType="varchar" direction="in" />
    <parameter name="@i_cta_alias" dataType="char" direction="in" />
    <parameter name="@o_id" dataType="int" direction="out" />
  </parameters>
  <queries>
    <query>
      <columns>
        <column name="nombre" />
        <column name="r_fecha_host" />
        <column name="r_estado_cta" />
        <column name="disponible" />
        <column name="contable" />
        <column name="girar" />
        <column name="cheques propios" />
        <column name="cheques locales" />
        <column name="monto bloqueado" />
        <column name="bloqueos" />
        <column name="r_num_blqmonto" />
        <column name="encaje" />
        <column name="saldo cheques" />
        <column name="r_ofi_cta" />
        <column name="r_pro_ban" />
        <column name="r_estado" />
        <column name="r_ssn_host" />
        <column name="sobregiro" />
        <column name="r_fecha_host" />
      </columns>
      <queryText>select 'nombre'          = @r_nombre ,  'r_fecha_host'    = @r_fecha_host,       '@r_estado_cta'  = @r_estado_cta,   'disponible'   = @r_sld_disp, 'contable'        = @r_sld_cont, 'girar'           = @r_sld_girar, 'cheques propios' = @r_sld_12h, 'cheques locales' = @r_sld_24h, 'monto bloqueado' = @r_monto_blq, 'bloqueos'        = @r_num_bloq, 'r_num_blqmonto'  = @r_num_blqmonto,      'encaje'    = @r_sld_disp + @r_sld_12h + @r_sld_24h + @r_sld_rem,  -- + @r_monto_blq,  GAGM1050 28/08/2006 'saldo cheques'   = @r_sld_rem, 'r_ofi_cta'       = @r_ofi_cta, 'r_pro_ban'       = @r_pro_ban, 'r_estado'        = @r_estado, 'r_ssn_host'      = @r_ssn_host , 'sobregiro'       = @r_monto_sob , 'r_fecha_host'    = @r_fecha_host   -- AQUI</queryText>
    </query>
    <query>
      <columns>
        <column name="nombre" />
        <column name="fecha_ult_mov" />
        <column name="estado_des" />
        <column name="saldo_contable" />
        <column name="saldo_encanje" />
        <column name="disponible" />
        <column name="id_cliente" />
        <column name="saldo cheques locales" />
        <column name="saldo cheques propios" />
        <column name="saldo a girar" />
        <column name="fecha apertura" />
        <column name="monto sobregiro" />
        <column name="bloqueos de valor" />
        <column name="monto bloqueado" />
        <column name="direccion" />
        <column name="saldo cheques internacionales" />
        <column name="monto embargado" />
      </columns>
      <queryText></queryText>
    </query>
  </queries>
</procedure>