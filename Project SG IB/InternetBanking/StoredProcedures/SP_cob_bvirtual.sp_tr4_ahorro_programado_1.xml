<?xml version="1.0" encoding="utf-8"?>
<procedure>
  <database>cob_bvirtual</database>
  <name>sp_tr4_ahorro_programado</name>
  <type>SYBASE</type>
  <version>1</version>
  <parameters>
    <parameter name="@s_culture" dataType="varchar" direction="in" />
    <parameter name="@s_ssn" dataType="int" direction="in" />
    <parameter name="@s_ssn_branch" dataType="int" direction="in" />
    <parameter name="@s_srv" dataType="varchar" direction="in" />
    <parameter name="@s_lsrv" dataType="varchar" direction="in" />
    <parameter name="@s_user" dataType="varchar" direction="in" />
    <parameter name="@s_sesn" dataType="int" direction="in" />
    <parameter name="@s_term" dataType="varchar" direction="in" />
    <parameter name="@s_date" dataType="datetime" direction="in" />
    <parameter name="@s_ofi" dataType="smallint" direction="in" />
    <parameter name="@s_rol" dataType="smallint" direction="in" />
    <parameter name="@s_org_err" dataType="char" direction="in" />
    <parameter name="@s_error" dataType="int" direction="in" />
    <parameter name="@s_sev" dataType="tinyint" direction="in" />
    <parameter name="@s_msg" dataType="varchar" direction="in" />
    <parameter name="@s_org" dataType="char" direction="in" />
    <parameter name="@s_servicio" dataType="int" direction="in" />
    <parameter name="@t_corr" dataType="char" direction="in" />
    <parameter name="@t_ejec" dataType="char" direction="in" />
    <parameter name="@t_ssn_corr" dataType="int" direction="in" />
    <parameter name="@t_debug" dataType="char" direction="in" />
    <parameter name="@t_file" dataType="varchar" direction="in" />
    <parameter name="@t_from" dataType="varchar" direction="in" />
    <parameter name="@t_rty" dataType="char" direction="in" />
    <parameter name="@t_trn" dataType="int" direction="in" />
    <parameter name="@t_show_version" dataType="bit" direction="in" />
    <parameter name="@i_cta_ahoprog" dataType="varchar" direction="in" />
    <parameter name="@i_cta_deb" dataType="varchar" direction="in" />
    <parameter name="@i_prod_deb" dataType="tinyint" direction="in" />
    <parameter name="@i_mon_deb" dataType="tinyint" direction="in" />
    <parameter name="@i_frecuencia" dataType="varchar" direction="in" />
    <parameter name="@i_monto" dataType="money" direction="in" />
    <parameter name="@i_moneda" dataType="tinyint" direction="in" />
    <parameter name="@i_concepto" dataType="varchar" direction="in" />
    <parameter name="@i_operacion" dataType="char" direction="in" />
    <parameter name="@i_fecha_ini" dataType="datetime" direction="in" />
    <parameter name="@i_plazo" dataType="varchar" direction="in" />
    <parameter name="@i_fecha_ven" dataType="datetime" direction="in" />
    <parameter name="@i_mail" dataType="varchar" direction="in" />
    <parameter name="@i_sucursal" dataType="int" direction="in" />
    <parameter name="@i_cliente" dataType="int" direction="in" />
    <parameter name="@i_tipo" dataType="int" direction="in" />
    <parameter name="@i_formato_fecha" dataType="int" direction="in" />
    <parameter name="@o_referencia" dataType="smallint" direction="out" />
    <parameter name="@o_body" dataType="varchar" direction="out" />
    <parameter name="@o_monto_min" dataType="money" direction="out" />
    <parameter name="@o_fecha_ven" dataType="varchar" direction="out" />
    <parameter name="@i_login" dataType="varchar" direction="in" />
    <parameter name="@i_retorno" dataType="varchar" direction="out" />
    <parameter name="@i_id_beneficiary" dataType="varchar" direction="in" />
    <parameter name="@o_descripcion_moneda" dataType="varchar" direction="out" />
    <parameter name="@o_nombre_cta" dataType="varchar" direction="out" />
    <parameter name="@o_tipo_cta" dataType="varchar" direction="out" />
    <parameter name="@o_cta_ahoprog" dataType="varchar" direction="out" />
    <parameter name="@t_orig_db_name" dataType="varchar" direction="in" />
    <parameter name="@t_orig_sp_name" dataType="varchar" direction="in" />
    <parameter name="@t_orig_trn" dataType="int" direction="in" />
    <parameter name="@i_cta" dataType="varchar" direction="in" />
    <parameter name="@i_mon" dataType="tinyint" direction="in" />
    <parameter name="@i_prod" dataType="tinyint" direction="in" />
  </parameters>
  <queries>
    <query>
      <columns>
        <column name="CODIGO" />
        <column name="FECHA AHORRO" />
        <column name="FECHA PAGO" />
        <column name="VALOR" />
        <column name="MONEDA" />
        <column name="EFECTUADO" />
      </columns>
      <queryText>SELECT DISTINCT "CODIGO" = da_codigo,"FECHA AHORRO" = da_fecha_cuota,"FECHA PAGO" = ISNULL (da_fecha_pago, ""),"VALOR" = da_valor,"MONEDA" = (SELECT  mo_nemonico FROM cobis..cl_moneda   WHERE mo_moneda = a.ah_moneda     ),"EFECTUADO" = CASE WHEN da_estado THEN "SI" ELSE "NO" END </queryText>
    </query>
    <query>
      <columns>
        <column name="CUENTA" />
        <column name="MONEDA" />
        <column name="CLIENTE" />
        <column name="SALDO" />
      </columns>
      <queryText>SELECT  "CUENTA" = ah_cta_banco </queryText>
    </query>
    <query>
      <columns>
        <column name="CUENTA" />
      </columns>
      <queryText>SELECT  "CUENTA" = ah_cta_banco </queryText>
    </query>
    <query>
      <columns>
        <column name="CUENTA" />
      </columns>
      <queryText>SELECT  "CUENTA" = ah_cta_banco </queryText>
    </query>
  </queries>
</procedure>