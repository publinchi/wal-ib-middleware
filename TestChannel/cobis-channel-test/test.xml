<?xml version="1.0" encoding="UTF-8"?>

<!-- Place this file in the target project and call it with "External Tools > Run As > Ant Build" -->
<!-- You have to change the MODEL and the TARGET values -->

<project basedir="." default="generateSample" name="scenario2Sample">
	<property name="maven.home" value="D:/installersjava/apache-maven-3.0.2" />
	<property name="maven.opts" value="" />
	<property name="eclipse-workspace" value="D:/workspaces/eclipse-modeler1" />
	<property name="module-name" value="cobis-channel" />
	<property name="project-api" value="${eclipse-workspace}/generate2/${module-name}-api" />
	<property name="project-dal" value="${eclipse-workspace}/generate2/${module-name}-dal" />
	<property name="project-bl" value="${eclipse-workspace}/generate2/${module-name}-bl" />
	<property name="project-service" value="${eclipse-workspace}/generate2/${module-name}-service" />
	<import file="../../scenario2/tasks/generate.xml" />

	<!-- Change the values of MODEL and TARGET to point to your model and output folder -->
	<property name="MODEL" value="${basedir}/model/model.uml" />
	<property name="TARGET" value="${basedir}/src-gen" />
	<!--<property name="TARGET" value="D:/workspaces/eclipse-modeler1/generate2"/> -->

	<target name="generateSample" description="Generate files in 'TARGET'">
		<antcall target="generate">
			<param name="model" value="${MODEL}" />
			<param name="target" value="${TARGET}" />
		</antcall>
	</target>
	<target name="generateAPI" description="Generate API for the services">
		<copy todir="${project-api}">
			<fileset dir="api-project" />
		</copy>
		<exec dir="${project-api}" executable="cmd">
			<arg value="/c mvn clean install" />
		</exec>
	</target>
	<target name="generateDAL" description="Generate DAL for service implementations">
		<copy todir="${project-dal}">
			<fileset dir="dal-project" />
		</copy>
		<exec dir="${project-dal}" executable="cmd">
			<arg value="/c mvn clean install" />
		</exec>
	</target>
	<target name="generateBL" description="Generate BL for service implementations">
		<copy todir="${project-bl}">
			<fileset dir="bl-project" />
		</copy>
		<exec dir="${project-bl}" executable="cmd">
			<arg value="/c mvn clean install" />
		</exec>
	</target>
	<target name="generateService" description="Generate BL for service implementations">
		<copy todir="${project-service}">
			<fileset dir="service-project" />
		</copy>
		<exec dir="${project-service}" executable="cmd">
			<arg value="/c mvn clean install" />
		</exec>
	</target>
</project>
