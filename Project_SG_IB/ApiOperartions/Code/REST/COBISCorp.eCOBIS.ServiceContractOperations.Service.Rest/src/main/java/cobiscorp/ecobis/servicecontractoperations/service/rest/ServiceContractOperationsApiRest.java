
/************************************************************/
/*                     IMPORTANTE                           */
/*   Esta aplicacion es parte de los  paquetes bancarios    */
/*   propiedad de COBISCORP.                                */
/*   Su uso no autorizado queda  expresamente  prohibido    */
/*   asi como cualquier alteracion o agregado hecho  por    */
/*   alguno de sus usuarios sin el debido consentimiento    */
/*   por escrito de COBISCORP.                              */
/*   Este programa esta protegido por la ley de derechos    */
/*   de autor y por las y por las convenciones              */
/*   internacionales de  propiedad intelectual. Su uso no   */
/*   autorizado dara  derecho a  COBISCORP para obtener     */
/*   ordenes de  secuestro o retencion y  para perseguir    */
/*   penalmente a los autores de cualquier infraccion.      */
/************************************************************/
/*   This code was generated by CEN-SG.                     */
/*   Changes to this file may cause incorrect behavior      */
/*   and will be lost if the code is regenerated.           */
/************************************************************/

package cobiscorp.ecobis.servicecontractoperations.service.rest;

import com.cobiscorp.cobis.cts.rest.client.api.exception.CTSRestException;

import cobiscorp.ecobis.datacontractoperations.dto.*;
import cobiscorp.ecobis.servicecontractoperations.service.IServiceContractOperationsApiService;

import org.apache.felix.scr.annotations.*;
import com.cobiscorp.cobis.commons.log.ILogger;
import com.cobiscorp.cobis.commons.log.LogFactory;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Null;
import javax.ws.rs.*;
import javax.ws.rs.core.Response;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;
import java.math.BigDecimal;

@Path("/cobis/api/Walmart/ServiceContractOperations")
@Component
@Service({ ServiceContractOperationsApiRest.class })
public class ServiceContractOperationsApiRest {

	@Reference(name = "iServiceContractOperationsApiService", referenceInterface = IServiceContractOperationsApiService.class, bind = "setiServiceContractOperationsApiService", unbind = "unsetiServiceContractOperationsApiService", cardinality = ReferenceCardinality.MANDATORY_UNARY, policy = ReferencePolicy.DYNAMIC)
	IServiceContractOperationsApiService iServiceContractOperationsApiService;
	private static final ILogger LOGGER = LogFactory.getLogger(ServiceContractOperationsApiRest.class);

	protected void setiServiceContractOperationsApiService(
			IServiceContractOperationsApiService iServiceContractOperationsApiService) {
		this.iServiceContractOperationsApiService = iServiceContractOperationsApiService;
	}

	protected void unsetiServiceContractOperationsApiService(
			IServiceContractOperationsApiService iServiceContractOperationsApiService) {
		this.iServiceContractOperationsApiService = null;
	}

	/**
	 * Service to apply credit account
	 */
	@POST
	@Path("/apiOperations/accounts/creditOperation")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response creditOperation(CreditAccountRequest inCreditAccountRequest) {
		LOGGER.logDebug("Start service execution REST: creditOperation");
		CreditAccountResponse outSingleCreditAccountResponse = new CreditAccountResponse();

		if (!validateMandatory(new Data("externalCustomerId", inCreditAccountRequest.getExternalCustomerId()),
				new Data("accountNumber", inCreditAccountRequest.getAccountNumber()),
				new Data("amount", inCreditAccountRequest.getAmount()),
				new Data("commission", inCreditAccountRequest.getCommission()),
				new Data("referenceNumber", inCreditAccountRequest.getReferenceNumber()),
				new Data("latitude", inCreditAccountRequest.getLatitude()),
				new Data("longitude", inCreditAccountRequest.getLongitude()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outSingleCreditAccountResponse = iServiceContractOperationsApiService
					.creditOperation(inCreditAccountRequest);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: creditOperation");
		return Response.ok(outSingleCreditAccountResponse).build();

	}

	/**
	 * Afiliate Customer
	 */
	@POST
	@Path("/apiOperations/onboarding/affiliateCustomer")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response affiliateCustomer(
			@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xRequestId,
			@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xEndUserRequestDateTime,
			@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xEndUserIp,
			@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xChannel,
			RequestAffiliateCustomer inRequestAffiliateCustomer) {
		LOGGER.logDebug("Start service execution REST: affiliateCustomer");
		ResponseAffiliateCustomer outSingleResponseAffiliateCustomer = new ResponseAffiliateCustomer();

		if (!validateMandatory(new Data("externalCustomerId", inRequestAffiliateCustomer.getExternalCustomerId()),
				new Data("accountNumber", inRequestAffiliateCustomer.getAccountNumber()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outSingleResponseAffiliateCustomer = iServiceContractOperationsApiService.affiliateCustomer(xRequestId,
					xEndUserRequestDateTime, xEndUserIp, xChannel, inRequestAffiliateCustomer);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: affiliateCustomer");
		return Response.ok(outSingleResponseAffiliateCustomer).build();

	}
	
	/**
	 * Authorize Purchase
	 */
	@POST
	@Path("/apiOperations/authorization/authorizePurchase")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response authorizePurchase(
			@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xRequestId,
			@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xEndUserRequestDateTime,
			@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xEndUserIp,
			@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xChannel,
			RequestAuthorizePurchase inRequestAuthorizePurchase) {
		LOGGER.logDebug("Start service execution REST: authorizePurchase");
		ResponseAuthorizePurchase outResponseAuthorizePurchase = new ResponseAuthorizePurchase();

		if (!validateMandatory(new Data("externalCustomerId", inRequestAuthorizePurchase.getExternalCustomerId()),
				new Data("uuid", inRequestAuthorizePurchase.getUuid()),
				new Data("accountNumber", inRequestAuthorizePurchase.getAccountNumber()),
				new Data("transmissionDateTimeGmt", inRequestAuthorizePurchase.getTransmissionDateTimeGmt()),
				new Data("date", inRequestAuthorizePurchase.getDate()),
				new Data("time", inRequestAuthorizePurchase.getTime()),
				new Data("mti", inRequestAuthorizePurchase.getMti()),
				new Data("processing.type", inRequestAuthorizePurchase.getProcessing().getType()),
				new Data("processing.code", inRequestAuthorizePurchase.getProcessing().getCode()),
				new Data("nsu", inRequestAuthorizePurchase.getNsu()),
				new Data("cardExpirationDate", inRequestAuthorizePurchase.getCardExpirationDate()),
				new Data("cardEntry.code", inRequestAuthorizePurchase.getCardEntry().getCode()),
				new Data("cardEntry.pin", inRequestAuthorizePurchase.getCardEntry().getPin()),
				new Data("cardEntry.mode", inRequestAuthorizePurchase.getCardEntry().getMode()),
				new Data("merchantCategoryCode", inRequestAuthorizePurchase.getMerchantCategoryCode()),
				new Data("values.sourceCurrencyCode", inRequestAuthorizePurchase.getValues().getSourceCurrencyCode()),
				new Data("values.settlementCurrencyCode", inRequestAuthorizePurchase.getValues().getSettlementCurrencyCode()),
				new Data("values.amount", inRequestAuthorizePurchase.getValues().getAmount()),
				new Data("institutionName", inRequestAuthorizePurchase.getInstitutionName()),
				new Data("terminalCode", inRequestAuthorizePurchase.getTerminalCode()),
				new Data("retrievalReferenceNumber", inRequestAuthorizePurchase.getRetrievalReferenceNumber()),
				new Data("acquirerCountryCode", inRequestAuthorizePurchase.getAcquirerCountryCode()),
				new Data("tokens62.affiliationNumber", inRequestAuthorizePurchase.getTokens62().getAffiliationNumber()),
				new Data("tokens62.storeNumber", inRequestAuthorizePurchase.getTokens62().getStoreNumber()),
				new Data("tokens62.posId", inRequestAuthorizePurchase.getTokens62().getPosId()),
				new Data("tokens62.cashier", inRequestAuthorizePurchase.getTokens62().getCashier()),
				new Data("tokens62.transaction", inRequestAuthorizePurchase.getTokens62().getTransaction()),
				new Data("tokens62.pinPad", inRequestAuthorizePurchase.getTokens62().getPinpad()),
				new Data("transactionIndicators.isCardPresent", inRequestAuthorizePurchase.getTransactionIndicators().isCardPresent()),
				new Data("transactionIndicators.isCardHolderPresent", inRequestAuthorizePurchase.getTransactionIndicators().isCardholderPresent()),
				new Data("transactionIndicators.isCvv2Present", inRequestAuthorizePurchase.getTransactionIndicators().isCvv2Present()),
				new Data("transactionIndicators.isPinValidatedOffline", inRequestAuthorizePurchase.getTransactionIndicators().isPinValidatedOffline()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseAuthorizePurchase = iServiceContractOperationsApiService.authorizePurchase(xRequestId,
					xEndUserRequestDateTime, xEndUserIp, xChannel, inRequestAuthorizePurchase);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: authorizePurchase");
		return Response.ok(outResponseAuthorizePurchase).build();

	}
	
	/**
	 * Authorize Purchase Dock
	 */
	@POST
	@Path("/apiOperations/authorizations/purchase")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response authorizePurchaseDock(
			@NotNull(message = "x-apigw-api-id may not be null") @HeaderParam("x-apigw-api-id") String xapigwapiid,
			@Null @HeaderParam("legacy-id") String legacyid,
			@NotNull(message = "client-id may not be null") @HeaderParam("client-id") String clientid,
			@NotNull(message = "uuid may not be null") @HeaderParam("uuid") String uuid,
			RequestAuthorizePurchaseDock inRequestAuthorizePurchaseDock) {
		LOGGER.logDebug("Start service execution REST: authorizePurchaseDock");
		ResponseAuthorizePurchaseDock outResponseAuthorizePurchaseDock = new ResponseAuthorizePurchaseDock();
		//se realiza la implementacion interna para no tener que mover la orquestacion se divide la cadena 
		//del nuevo campo aditional_information, para ingresar al tokens 62 
		ArrayList<String> adtInf = aditionalData(inRequestAuthorizePurchaseDock.getAdditional_information());
		if(adtInf != null && !adtInf.isEmpty())
		{
			inRequestAuthorizePurchaseDock.setTokens_62(new Tokens_62());
			inRequestAuthorizePurchaseDock.getTokens_62().setAffiliation_number(new BigDecimal(adtInf.get(0)));
			inRequestAuthorizePurchaseDock.getTokens_62().setStore_number(new BigDecimal(adtInf.get(1)));
			inRequestAuthorizePurchaseDock.getTokens_62().setPos_id(adtInf.get(2));
			inRequestAuthorizePurchaseDock.getTokens_62().setCashier(adtInf.get(3));
			inRequestAuthorizePurchaseDock.getTokens_62().setTransaction(adtInf.get(4));
			inRequestAuthorizePurchaseDock.getTokens_62().setPinpad(adtInf.get(5));
		}
				
		if (!validateMandatory(
				//new Data("authorization_code", inRequestAuthorizePurchaseDock.getAuthorization_code()),
				new Data("card_id", inRequestAuthorizePurchaseDock.getCard_id()),
				new Data("card_entry.code", inRequestAuthorizePurchaseDock.getCard_entry().getCode()),
				new Data("card_entry.pin", inRequestAuthorizePurchaseDock.getCard_entry().getPin()),
				new Data("establishment_code", inRequestAuthorizePurchaseDock.getEstablishment_code()),
				new Data("installments", inRequestAuthorizePurchaseDock.getInstallments()),
				new Data("merchant_category_code", inRequestAuthorizePurchaseDock.getMerchant_category_code()),
				new Data("mti", inRequestAuthorizePurchaseDock.getMti()),
				new Data("nsu", inRequestAuthorizePurchaseDock.getNsu()),
				new Data("processing.code", inRequestAuthorizePurchaseDock.getProcessing().getCode()),
				new Data("processing.destiny_account_type",
						inRequestAuthorizePurchaseDock.getProcessing().getDestiny_account_type()),
				new Data("processing.origin_account_type",
						inRequestAuthorizePurchaseDock.getProcessing().getOrigin_account_type()),
				new Data("processing.type", inRequestAuthorizePurchaseDock.getProcessing().getType()),
				new Data("terminal_code", inRequestAuthorizePurchaseDock.getTerminal_code()),
				new Data("transaction_origin", inRequestAuthorizePurchaseDock.getTransaction_origin()),
				new Data("values.billing_currency_code",
						inRequestAuthorizePurchaseDock.getValues().getBilling_currency_code()),
				new Data("values.billing_value", inRequestAuthorizePurchaseDock.getValues().getBilling_value()),
				new Data("values.source_currency_code",
						inRequestAuthorizePurchaseDock.getValues().getSource_currency_code()),
				new Data("values.source_value", inRequestAuthorizePurchaseDock.getValues().getSource_value()),
				new Data("establishment", inRequestAuthorizePurchaseDock.getEstablishment()),
				new Data("establishment_code", inRequestAuthorizePurchaseDock.getEstablishment_code()),
				//new Data("tokens_62.affiliation_number", inRequestAuthorizePurchaseDock.getTokens_62().getAffiliation_number()),
				//new Data("tokens_62.store_number", inRequestAuthorizePurchaseDock.getTokens_62().getStore_number()),
				//new Data("tokens_62.pos_id", inRequestAuthorizePurchaseDock.getTokens_62().getPos_id()),
				//new Data("tokens_62.cashier", inRequestAuthorizePurchaseDock.getTokens_62().getCashier()),
				//new Data("tokens_62.transaction", inRequestAuthorizePurchaseDock.getTokens_62().getTransaction()),
				//new Data("tokens_62.pin_pad", inRequestAuthorizePurchaseDock.getTokens_62().getPinpad()),
				new Data("additional_information", inRequestAuthorizePurchaseDock.getAdditional_information()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseAuthorizePurchaseDock = iServiceContractOperationsApiService.authorizePurchaseDock(xapigwapiid,
					legacyid, clientid, uuid, inRequestAuthorizePurchaseDock);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: authorizePurchaseDock");
		return Response.ok(outResponseAuthorizePurchaseDock).build();

	}


		/**
		 * Authorize Withdrawal
		 */
		@POST
		@Path("/apiOperations/authorization/authorizeWithdrawal")
		@Consumes({ "application/json" })
		@Produces({ "application/json" })
		public Response authorizeWithdrawal(
				@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xRequestId,
				@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xEndUserRequestDateTime,
				@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xEndUserIp,
				@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xChannel,
				RequestAuthorizeWithdrawal inRequestAuthorizeWithdrawal) {
			LOGGER.logDebug("Start service execution REST: authorizeWithdrawal");
			ResponseAuthorizeWithdrawal outResponseAuthorizeWithdrawal = new ResponseAuthorizeWithdrawal();

			if (!validateMandatory(new Data("externalCustomerId", inRequestAuthorizeWithdrawal.getExternalCustomerId()),
					new Data("uuid", inRequestAuthorizeWithdrawal.getUuid()),
					new Data("orderId", inRequestAuthorizeWithdrawal.getOrderId()),
					new Data("accountNumber", inRequestAuthorizeWithdrawal.getAccountNumber()),
					new Data("transmissionDateTimeGmt", inRequestAuthorizeWithdrawal.getTransmissionDateTimeGmt()),
					new Data("date", inRequestAuthorizeWithdrawal.getDate()),
					new Data("time", inRequestAuthorizeWithdrawal.getTime()),
					new Data("mti", inRequestAuthorizeWithdrawal.getMti()),
					new Data("processing.type", inRequestAuthorizeWithdrawal.getProcessing().getType()),
					new Data("processing.code", inRequestAuthorizeWithdrawal.getProcessing().getCode()),
					new Data("nsu", inRequestAuthorizeWithdrawal.getNsu()),
					new Data("merchantCategoryCode", inRequestAuthorizeWithdrawal.getMerchantCategoryCode()),
					new Data("transaction.sourceCurrencyCode", inRequestAuthorizeWithdrawal.getTransaction().getSourceCurrencyCode()),
					new Data("transaction.settlementCurrencyCode", inRequestAuthorizeWithdrawal.getTransaction().getSettlementCurrencyCode()),
					new Data("transaction.amount", inRequestAuthorizeWithdrawal.getTransaction().getAmount()),
					new Data("institutionName", inRequestAuthorizeWithdrawal.getInstitutionName()),
					new Data("terminalCode", inRequestAuthorizeWithdrawal.getTerminalCode()),
					new Data("retrievalReferenceNumber", inRequestAuthorizeWithdrawal.getRetrievalReferenceNumber()),
					new Data("acquirerCountryCode", inRequestAuthorizeWithdrawal.getAcquirerCountryCode()),
					new Data("tokens62.affiliationNumber", inRequestAuthorizeWithdrawal.getTokens62().getAffiliationNumber()),
					new Data("tokens62.storeNumber", inRequestAuthorizeWithdrawal.getTokens62().getStoreNumber()),
					new Data("tokens62.posId", inRequestAuthorizeWithdrawal.getTokens62().getPosId()),
					new Data("tokens62.cashier", inRequestAuthorizeWithdrawal.getTokens62().getCashier()),
					new Data("tokens62.transaction", inRequestAuthorizeWithdrawal.getTokens62().getTransaction()),
					new Data("tokens62.pinPad", inRequestAuthorizeWithdrawal.getTokens62().getPinpad()))) {
				LOGGER.logDebug("400 is returned - Required fields are missing");
				return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
						.build();
			}

			try {
				outResponseAuthorizeWithdrawal = iServiceContractOperationsApiService.authorizeWithdrawal(xRequestId,
						xEndUserRequestDateTime, xEndUserIp, xChannel, inRequestAuthorizeWithdrawal);
			} catch (CTSRestException e) {
				LOGGER.logError("CTSRestException", e);
				if ("404".equals(e.getMessage())) {
					LOGGER.logDebug("404 is returned - No data found");
					return Response.status(404).entity("No data found").build();
				}

				LOGGER.logDebug("409 is returned - The stored procedure raise an error");
				return Response.status(409).entity(e.getMessageBlockList()).build();
			} catch (Exception e) {
				LOGGER.logDebug("500 is returned - Code exception");
				LOGGER.logError("Exception", e);
				return Response.status(500).entity(e.getMessage()).build();
			}

			LOGGER.logDebug("Ends service execution REST: authorizeWithdrawal");
			return Response.ok(outResponseAuthorizeWithdrawal).build();

		}
	
		/**
		 * Authorize Withdrawal Dock
		 */
		@POST
		@Path("/apiOperations/authorizations/withdrawal")
		@Consumes({ "application/json" })
		@Produces({ "application/json" })
		public Response authorizeWithdrawalDock(@Null @HeaderParam("legacy-id") String legacyid,
				@NotNull(message = "client-id may not be null") @HeaderParam("client-id") String clientid,
				@NotNull(message = "uuid may not be null") @HeaderParam("uuid") String uuid,
				@NotNull(message = "x-apigw-api-id may not be null") @HeaderParam("x-apigw-api-id") String xapigwapiid,
				RequestAuthorizeWithdrawalDock inRequestAuthorizeWithdrawalDock) {
			LOGGER.logDebug("Start service execution REST: authorizeWithdrawalDock");
			ResponseAuthorizeWithdrawalDock outResponseAuthorizeWithdrawalDock = new ResponseAuthorizeWithdrawalDock();
			//se realiza la implementacion interna para no tener que mover la orquestacion se divide la cadena 
			//del nuevo campo aditional_information, para ingresar al tokens 62 
			ArrayList<String> adtInf = aditionalData(inRequestAuthorizeWithdrawalDock.getAdditional_information());
			if(adtInf != null && !adtInf.isEmpty())
			{
				inRequestAuthorizeWithdrawalDock.setTokens_62(new Tokens_62());
				inRequestAuthorizeWithdrawalDock.getTokens_62().setAffiliation_number(new BigDecimal(adtInf.get(0)));
				inRequestAuthorizeWithdrawalDock.getTokens_62().setStore_number(new BigDecimal(adtInf.get(1)));
				inRequestAuthorizeWithdrawalDock.getTokens_62().setPos_id(adtInf.get(2));
				inRequestAuthorizeWithdrawalDock.getTokens_62().setCashier(adtInf.get(3));
				inRequestAuthorizeWithdrawalDock.getTokens_62().setTransaction(adtInf.get(4));
				inRequestAuthorizeWithdrawalDock.getTokens_62().setPinpad(adtInf.get(5));
			}
			if (!validateMandatory(new Data("mti", inRequestAuthorizeWithdrawalDock.getMti()),
					new Data("processing.type", inRequestAuthorizeWithdrawalDock.getMti()),
					new Data("processing.origin_account_type",
							inRequestAuthorizeWithdrawalDock.getProcessing().getOrigin_account_type()),
					new Data("processing.destiny_account_type",
							inRequestAuthorizeWithdrawalDock.getProcessing().getDestiny_account_type()),
					new Data("processing.code", inRequestAuthorizeWithdrawalDock.getProcessing().getCode()),
					new Data("card_entry.code", inRequestAuthorizeWithdrawalDock.card_entryInstance().getCode()),
					new Data("card_entry.pin", inRequestAuthorizeWithdrawalDock.getCard_entry().getPin()),
					new Data("card_entry.mode", inRequestAuthorizeWithdrawalDock.getCard_entry().getMode()),
					new Data("establishment", inRequestAuthorizeWithdrawalDock.getEstablishment()),
					new Data("card_id", inRequestAuthorizeWithdrawalDock.getCard_id()))) {
				LOGGER.logDebug("400 is returned - Required fields are missing");
				return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
						.build();
			}

			try {
				outResponseAuthorizeWithdrawalDock = iServiceContractOperationsApiService.authorizeWithdrawalDock(
						legacyid, clientid, uuid, xapigwapiid, inRequestAuthorizeWithdrawalDock);
			} catch (CTSRestException e) {
				LOGGER.logError("CTSRestException", e);
				if ("404".equals(e.getMessage())) {
					LOGGER.logDebug("404 is returned - No data found");
					return Response.status(404).entity("No data found").build();
				}

				LOGGER.logDebug("409 is returned - The stored procedure raise an error");
				return Response.status(409).entity(e.getMessageBlockList()).build();
			} catch (Exception e) {
				LOGGER.logDebug("500 is returned - Code exception");
				LOGGER.logError("Exception", e);
				return Response.status(500).entity(e.getMessage()).build();
			}

			LOGGER.logDebug("Ends service execution REST: authorizeWithdrawalDock");
			return Response.ok(outResponseAuthorizeWithdrawalDock).build();

		}
	
	/**
	 * Authorize Deposit
	 */
	@POST
	@Path("/apiOperations/authorization/authorizeDeposit")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response authorizeDeposit(
			@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xRequestId,
			@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xEndUserRequestDateTime,
			@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xEndUserIp,
			@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xChannel,
			RequestAuthorizeDeposit inRequestAuthorizeDeposit) {
		LOGGER.logDebug("Start service execution REST: authorizeDeposit");
		ResponseAuthorizeDeposit outResponseAuthorizeDeposit = new ResponseAuthorizeDeposit();

		if (!validateMandatory(new Data("externalCustomerId", inRequestAuthorizeDeposit.getExternalCustomerId()),
				new Data("uuid", inRequestAuthorizeDeposit.getUuid()),
				new Data("orderId", inRequestAuthorizeDeposit.getOrderId()),
				new Data("accountNumber", inRequestAuthorizeDeposit.getAccountNumber()),
				new Data("transmissionDateTimeGmt", inRequestAuthorizeDeposit.getTransmissionDateTimeGmt()),
				new Data("date", inRequestAuthorizeDeposit.getDate()),
				new Data("time", inRequestAuthorizeDeposit.getTime()),
				new Data("mti", inRequestAuthorizeDeposit.getMti()),
				new Data("processing.type", inRequestAuthorizeDeposit.getProcessing().getType()),
				new Data("processing.code", inRequestAuthorizeDeposit.getProcessing().getCode()),
				new Data("nsu", inRequestAuthorizeDeposit.getNsu()),
				new Data("merchantCategoryCode", inRequestAuthorizeDeposit.getMerchantCategoryCode()),
				new Data("transaction.sourceCurrencyCode", inRequestAuthorizeDeposit.getTransaction().getSourceCurrencyCode()),
				new Data("transaction.settlementCurrencyCode", inRequestAuthorizeDeposit.getTransaction().getSettlementCurrencyCode()),
				new Data("transaction.amount", inRequestAuthorizeDeposit.getTransaction().getAmount()),
				new Data("institutionName", inRequestAuthorizeDeposit.getInstitutionName()),
				new Data("terminalCode", inRequestAuthorizeDeposit.getTerminalCode()),
				new Data("retrievalReferenceNumber", inRequestAuthorizeDeposit.getRetrievalReferenceNumber()),
				new Data("acquirerCountryCode", inRequestAuthorizeDeposit.getAcquirerCountryCode()),
				new Data("tokens62.affiliationNumber", inRequestAuthorizeDeposit.getTokens62().getAffiliationNumber()),
				new Data("tokens62.storeNumber", inRequestAuthorizeDeposit.getTokens62().getStoreNumber()),
				new Data("tokens62.posId", inRequestAuthorizeDeposit.getTokens62().getPosId()),
				new Data("tokens62.cashier", inRequestAuthorizeDeposit.getTokens62().getCashier()),
				new Data("tokens62.transaction", inRequestAuthorizeDeposit.getTokens62().getTransaction()),
				new Data("tokens62.pinPad", inRequestAuthorizeDeposit.getTokens62().getPinpad()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseAuthorizeDeposit = iServiceContractOperationsApiService.authorizeDeposit(xRequestId,
					xEndUserRequestDateTime, xEndUserIp, xChannel, inRequestAuthorizeDeposit);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: authorizeDeposit");
		return Response.ok(outResponseAuthorizeDeposit).build();

	}
	
	/**
	 * Authorize Deposit Dock
	 */
	@POST
	@Path("/apiOperations/authorizations/deposit")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response authorizeDepositDock(@Null @HeaderParam("legacy-id") String legacyid,
			@NotNull(message = "client-id may not be null") @HeaderParam("client-id") String clientid,
			@NotNull(message = "uuid may not be null") @HeaderParam("uuid") String uuid,
			@NotNull(message = "x-apigw-api-id may not be null") @HeaderParam("x-apigw-api-id") String xapigwapiid,
			RequestAuthorizeDepositDock inRequestAuthorizeDepositDock) {
		LOGGER.logDebug("Start service execution REST: authorizeDepositDock");
		ResponseAuthorizeDepositDock outResponseAuthorizeDepositDock = new ResponseAuthorizeDepositDock();
		//se realiza la implementacion interna para no tener que mover la orquestacion se divide la cadena 
		//del nuevo campo aditional_information, para ingresar al tokens 62 
		ArrayList<String> adtInf = aditionalData(inRequestAuthorizeDepositDock.getAdditional_information());
		if(adtInf != null && !adtInf.isEmpty())
		{
			inRequestAuthorizeDepositDock.setTokens_62(new Tokens_62());
			inRequestAuthorizeDepositDock.getTokens_62().setAffiliation_number(new BigDecimal(adtInf.get(0)));
			inRequestAuthorizeDepositDock.getTokens_62().setStore_number(new BigDecimal(adtInf.get(1)));
			inRequestAuthorizeDepositDock.getTokens_62().setPos_id(adtInf.get(2));
			inRequestAuthorizeDepositDock.getTokens_62().setCashier(adtInf.get(3));
			inRequestAuthorizeDepositDock.getTokens_62().setTransaction(adtInf.get(4));
			inRequestAuthorizeDepositDock.getTokens_62().setPinpad(adtInf.get(5));
		}
		if (!validateMandatory(new Data("mti", inRequestAuthorizeDepositDock.getMti()),
				new Data("processing.type", inRequestAuthorizeDepositDock.getProcessing().getType()),
				new Data("processing.origin_account_type",
						inRequestAuthorizeDepositDock.getProcessing().getOrigin_account_type()),
				new Data("processing.destiny_account_type",
						inRequestAuthorizeDepositDock.getProcessing().getDestiny_account_type()),
				new Data("processing.code", inRequestAuthorizeDepositDock.getProcessing().getCode()),
				new Data("card_entry.code", inRequestAuthorizeDepositDock.getCard_entry().getCode()),
				new Data("card_entry.pin", inRequestAuthorizeDepositDock.getCard_entry().getPin()),
				new Data("card_entry.mode", inRequestAuthorizeDepositDock.getCard_entry().getMode()),
				new Data("establishment", inRequestAuthorizeDepositDock.getEstablishment()), 
				new Data("retrieval_reference_number", inRequestAuthorizeDepositDock.getRetrieval_reference_number()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseAuthorizeDepositDock = iServiceContractOperationsApiService.authorizeDepositDock(legacyid,
					clientid, uuid, xapigwapiid, inRequestAuthorizeDepositDock);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: authorizeDepositDock");
		return Response.ok(outResponseAuthorizeDepositDock).build();

	}

	/**
	 * Authorize Reversal
	 */
	@POST
	@Path("/apiOperations/authorization/authorizeReversal")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response authorizeReversal(
			@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xRequestId,
			@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xEndUserRequestDateTime,
			@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xEndUserIp,
			@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xChannel,
			RequestAuthorizeReversal inRequestAuthorizeReversal) {
		LOGGER.logDebug("Start service execution REST: authorizeReversal");
		ResponseAuthorizeReversal outResponseAuthorizeReversal = new ResponseAuthorizeReversal();

		if (!validateMandatory(new Data("externalCustomerId", inRequestAuthorizeReversal.getExternalCustomerId()),
				new Data("uuid", inRequestAuthorizeReversal.getUuid()),
				new Data("orderId", inRequestAuthorizeReversal.getOrderId()),
				new Data("accountNumber", inRequestAuthorizeReversal.getAccountNumber()),
				new Data("transmissionDateTimeGmt", inRequestAuthorizeReversal.getTransmissionDateTimeGmt()),
				new Data("date", inRequestAuthorizeReversal.getDate()),
				new Data("time", inRequestAuthorizeReversal.getTime()),
				new Data("mti", inRequestAuthorizeReversal.getMti()),
				new Data("processing.type", inRequestAuthorizeReversal.getProcessing().getType()),
				new Data("processing.code", inRequestAuthorizeReversal.getProcessing().getCode()),
				new Data("nsu", inRequestAuthorizeReversal.getNsu()),
				new Data("merchantCategoryCode", inRequestAuthorizeReversal.getMerchantCategoryCode()),
				new Data("transaction.sourceCurrencyCode", inRequestAuthorizeReversal.getTransaction().getSourceCurrencyCode()),
				new Data("transaction.settlementCurrencyCode", inRequestAuthorizeReversal.getTransaction().getSettlementCurrencyCode()),
				new Data("transaction.amount", inRequestAuthorizeReversal.getTransaction().getAmount()),
				new Data("terminalCode", inRequestAuthorizeReversal.getTerminalCode()),
				new Data("retrievalReferenceNumber", inRequestAuthorizeReversal.getRetrievalReferenceNumber()),
				new Data("acquirerCountryCode", inRequestAuthorizeReversal.getAcquirerCountryCode()),
				new Data("tokens62.affiliationNumber", inRequestAuthorizeReversal.getTokens62().getAffiliationNumber()),
				new Data("tokens62.storeNumber", inRequestAuthorizeReversal.getTokens62().getStoreNumber()),
				new Data("tokens62.posId", inRequestAuthorizeReversal.getTokens62().getPosId()),
				new Data("tokens62.cashier", inRequestAuthorizeReversal.getTokens62().getCashier()),
				new Data("tokens62.transaction", inRequestAuthorizeReversal.getTokens62().getTransaction()),
				new Data("tokens62.pinPad", inRequestAuthorizeReversal.getTokens62().getPinpad()),
				new Data("establishment", inRequestAuthorizeReversal.getEstablishment()),
				new Data("originalTransactionData", inRequestAuthorizeReversal.getOriginalTransactionData().getUuid()),
				new Data("originalTransactionData", inRequestAuthorizeReversal.getOriginalTransactionData().getNsu()),
				new Data("originalTransactionData", inRequestAuthorizeReversal.getOriginalTransactionData().getMti()),
				new Data("originalTransactionData",
						inRequestAuthorizeReversal.getOriginalTransactionData().getTransmissionDateTimeGmt()),
				new Data("originalTransactionData",
						inRequestAuthorizeReversal.getOriginalTransactionData().getInstitutionName()),
				new Data("originalTransactionData",
						inRequestAuthorizeReversal.getOriginalTransactionData().getRetrievalReferenceNumber()),
				new Data("originalTransactionData", inRequestAuthorizeReversal.getOriginalTransactionData().getType()),
				new Data("originalTransactionData",
						inRequestAuthorizeReversal.getOriginalTransactionData().getCode()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseAuthorizeReversal = iServiceContractOperationsApiService.authorizeReversal(xRequestId,
					xEndUserRequestDateTime, xEndUserIp, xChannel, inRequestAuthorizeReversal);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: authorizeReversal");
		return Response.ok(outResponseAuthorizeReversal).build();

	}

	/**
	 * Create new customers
	 */
	@POST
	@Path("/apiOperations/customer/createCustomer")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response createCustomer(
			@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xRequestId,
			@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xEndUserRequestDateTime,
			@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xEndUserIp,
			@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xChannel,
			CreateCustomerRequest inCreateCustomerRequest) {
		LOGGER.logDebug("Start service execution REST: createCustomer");
		CreateCustomerResponse outCreateCustomerResponse = new CreateCustomerResponse();

		if (!validateMandatory(new Data("birthDate", inCreateCustomerRequest.getBirthDate()),
				new Data("gender", inCreateCustomerRequest.getGender()),
				new Data("idNumber", inCreateCustomerRequest.getIdNumber()),
				new Data("lastName", inCreateCustomerRequest.getLastName()),
				new Data("firstName", inCreateCustomerRequest.getFirstName()),
				new Data("secondLastName", inCreateCustomerRequest.getSecondLastName()),
				new Data("identificationNumber", inCreateCustomerRequest.getIdentificationNumber()),
				new Data("identificationType", inCreateCustomerRequest.getIdentificationType()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("The request message is not properly formatted").build();
		}

		try {
			outCreateCustomerResponse = iServiceContractOperationsApiService.createCustomer(xRequestId,
					xEndUserRequestDateTime, xEndUserIp, xChannel, inCreateCustomerRequest);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: createCustomer");
		return Response.ok(outCreateCustomerResponse).build();

	}

	/**
	 * Service to create a savings account for an existing customer
	 */
	@POST
	@Path("/apiOperations/customer/createSavingAccount")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response createSavingAccount(RequestCreateSavingAccount inRequestCreateSavingAccount) {
		LOGGER.logDebug("Start service execution REST: createSavingAccount");
		ResponseCreateSavingAccount outResponseCreateSavingAccount = new ResponseCreateSavingAccount();

		if (!validateMandatory(
			new Data("customerId", inRequestCreateSavingAccount.getCustomerId()),
			new Data("currency", inRequestCreateSavingAccount.getCurrency()),
			new Data("product", inRequestCreateSavingAccount.getProduct()),
			new Data("productSubType", inRequestCreateSavingAccount.getProductSubType()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("The request message is not properly formatted").build();
		} // The request message is not properly formatted

		try {
			outResponseCreateSavingAccount = iServiceContractOperationsApiService
					.createSavingAccount(inRequestCreateSavingAccount);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: createSavingAccount");
		return Response.ok(outResponseCreateSavingAccount).build();

	}

	/**
	 * Service to delete a beneficiary.
	 */
	/*@POST
	@Path("/apiOperations/onboarding/deleteBeneficiary")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response deleteBeneficiary(
			@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xRequestId,
			@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xEndUserRequestDateTime,
			@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xEndUserIp,
			@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xChannel,
			RequestDeleteBeneficiary inRequestDeleteBeneficiary) {
		LOGGER.logDebug("Start service execution REST: deleteBeneficiary");
		ResponseDeleteBeneficiary outResponseDeleteBeneficiary = new ResponseDeleteBeneficiary();

		if (!validateMandatory(new Data("externalCustomerId", inRequestDeleteBeneficiary.getExternalCustomerId()),
				new Data("beneficiaryId", inRequestDeleteBeneficiary.getBeneficiaryId()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseDeleteBeneficiary = iServiceContractOperationsApiService.deleteBeneficiary(xRequestId,
					xEndUserRequestDateTime, xEndUserIp, xChannel, inRequestDeleteBeneficiary);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: deleteBeneficiary");
		return Response.ok(outResponseDeleteBeneficiary).build();

	}
*/
	/**
	 * Encrypt Data
	 */
	@POST
	@Path("/apiOperations/security/encryptData")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response encryptData(RequestEncriptData inRequestEncriptData) {
		LOGGER.logDebug("Start service execution REST: encryptData");
		ResponseEncriptData outSingleResponseEncriptData = new ResponseEncriptData();

		if (!validateMandatory(new Data("password", inRequestEncriptData.getPassword()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("The request message is not properly formatted").build();
		}

		try {
			outSingleResponseEncriptData = iServiceContractOperationsApiService.encryptData(inRequestEncriptData);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: encryptData");
		return Response.ok(outSingleResponseEncriptData).build();

	}

	/**
	 * Service to generate and send an OTP to the client
	 */
	@POST
	@Path("/apiOperations/password/generateTransactionFactor")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response generateTransactionFactor(RequestOtp inRequestOtp) {
		LOGGER.logDebug("Start service execution REST: generateTransactionFactor");
		ResponseOtp outSingleResponseOtp = new ResponseOtp();
		
		/*if (!validateMandatory(new Data("otp", inRequestOtp.getOtp()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("The request message is not properly formatted").build();
		}*/

		try {
			outSingleResponseOtp = iServiceContractOperationsApiService.generateTransactionFactor(inRequestOtp);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: generateTransactionFactor");
		return Response.ok(outSingleResponseOtp).build();

	}

	/**
	 * Check Account Details
	 */
	@POST
	@Path("/apiOperations/accounts/getBalancesDetail")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response getBalancesDetail(
			@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xRequestId,
			@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xEndUserRequestDateTime,
			@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xEndUserIp,
			@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xChannel,
			RequestGetBalancesDetail inRequestGetBalancesDetail) {
		LOGGER.logDebug("Start service execution REST: getBalancesDetail");
		ResponseGetBalancesDetail outSingleResponseGetBalancesDetail = new ResponseGetBalancesDetail();

		if (!validateMandatory(new Data("externalCustomerId", inRequestGetBalancesDetail.getExternalCustomerId()),
				new Data("accountNumber", inRequestGetBalancesDetail.getAccountNumber()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outSingleResponseGetBalancesDetail = iServiceContractOperationsApiService.getBalancesDetail(xRequestId,
					xEndUserRequestDateTime, xEndUserIp, xChannel, inRequestGetBalancesDetail);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: getBalancesDetail");
		return Response.ok(outSingleResponseGetBalancesDetail).build();

	}

	/**
	 * Get Beneficiary Saving Account
	 */
	@POST
	@Path("/apiOperations/onboarding/getBeneficiary")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response getBeneficiary(GetBeneficiaryRequest inGetBeneficiaryRequest) {
		LOGGER.logDebug("Start service execution REST: getBeneficiary");
		GetBeneficiaryResponse outGetBeneficiaryResponse = new GetBeneficiaryResponse();

		if (!validateMandatory(new Data("externalCustomerId", inGetBeneficiaryRequest.getExternalCustomerId()),
				new Data("account", inGetBeneficiaryRequest.getAccount()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outGetBeneficiaryResponse = iServiceContractOperationsApiService.getBeneficiary(inGetBeneficiaryRequest);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: getBeneficiary");
		return Response.ok(outGetBeneficiaryResponse).build();

	}

	/**
	 * Get catalog
	 */
	@POST
	@Path("/apiOperations/common/getCatalog")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response getCatalog(
			@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xRequestId,
			@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xEndUserRequestDateTime,
			@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xEndUserIp,
			@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xChannel,
			RequestCatalog inRequestCatalog) {
		LOGGER.logDebug("Start service execution REST: getCatalog");
		ResponseCatalog outResponseCatalog = new ResponseCatalog();

		if (!validateMandatory(new Data("catalogueTable", inRequestCatalog.getCatalogueTable()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("The request message is not properly formatted").build();
		}

		try {
			outResponseCatalog = iServiceContractOperationsApiService.getCatalog(xRequestId, xEndUserRequestDateTime,
					xEndUserIp, xChannel, inRequestCatalog);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: getCatalog");
		return Response.ok(outResponseCatalog).build();

	}

	/**
	 * Get Own Accounts View
	 */
	@POST
	@Path("/apiOperations/accounts/getOwnAccountsView")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response getOwnAccountsView(RequestOwnAccountsView inRequestOwnAccountsView) {
		LOGGER.logDebug("Start service execution REST: getOwnAccountsView");
		ResponseOwnAccountsView outResponseOwnAccountsView = new ResponseOwnAccountsView();

		if (!validateMandatory(new Data("externalCustomerId", inRequestOwnAccountsView.getExternalCustomerId()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseOwnAccountsView = iServiceContractOperationsApiService
					.getOwnAccountsView(inRequestOwnAccountsView);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: getOwnAccountsView");
		return Response.ok(outResponseOwnAccountsView).build();

	}
	
	/**
	 * Get Statement List
	 */
	@POST
	@Path("/apiOperations/accounts/getStatementList")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response getStatementList(RequestGetStatementList inRequestGetStatementList) {
		LOGGER.logDebug("Start service execution REST: getStatementList");
		ResponseGetStatementList outResponseGetStatementList = new ResponseGetStatementList();

		if (!validateMandatory(new Data("month", inRequestGetStatementList.getMonth()),
				new Data("year", inRequestGetStatementList.getYear()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseGetStatementList = iServiceContractOperationsApiService
					.getStatementList(inRequestGetStatementList);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: getStatementList");
		return Response.ok(outResponseGetStatementList).build();

	}
	
	/**
	 * Transaction Limit API
	 */
	@POST
	@Path("/apiOperations/accounts/getTransactionLimit")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response getTransactionLimit(
			@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xrequestid,
			@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xenduserrequestdatetime,
			@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xenduserip,
			@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xchannel,
			RequestGetTransactionLimit inRequestGetTransactionLimit) {
		LOGGER.logDebug("Start service execution REST: getTransactionLimit");
		ResponseGetTransactionLimit outResponseGetTransactionLimit = new ResponseGetTransactionLimit();

		if (!validateMandatory(new Data("externalCustomerId", inRequestGetTransactionLimit.getExternalCustomerId()),
				new Data("accountNumber", inRequestGetTransactionLimit.getAccountNumber()),
				new Data("transactionType", inRequestGetTransactionLimit.getTransactionType()),
				new Data("transactionSubType", inRequestGetTransactionLimit.getTransactionSubType()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseGetTransactionLimit = iServiceContractOperationsApiService.getTransactionLimit(xrequestid,
					xenduserrequestdatetime, xenduserip, xchannel, inRequestGetTransactionLimit);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: getTransactionLimit");
		return Response.ok(outResponseGetTransactionLimit).build();

	}

	/**
	 * Service to obtain the detail of movements of an existing savings account
	 */
	@POST
	@Path("/apiOperations/accounts/getMovementsDetail")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response getMovementsDetail(
			@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xRequestId,
			@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xEndUserRequestDateTime,
			@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xEndUserIp,
			@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xChannel,
			RequestGetMovementsDetail inRequestGetMovementsDetail) {
		LOGGER.logDebug("Start service execution REST: getMovementsDetail");
		ResponseGetMovementsDetail outResponseGetMovementsDetail = new ResponseGetMovementsDetail();

		if (!validateMandatory(new Data("accountNumber", inRequestGetMovementsDetail.getAccountNumber()),
				new Data("externalCustomerId", inRequestGetMovementsDetail.getExternalCustomerId()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseGetMovementsDetail = iServiceContractOperationsApiService.getMovementsDetail(xRequestId,
					xEndUserRequestDateTime, xEndUserIp, xChannel, inRequestGetMovementsDetail);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: getMovementsDetail");
		return Response.ok(outResponseGetMovementsDetail).build();

	}

	/**
	 * Municipality By State
	 */
	@POST
	@Path("/apiOperations/onboarding/getMunicipalityByState")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response getMunicipalityByState(RequestMunicipalityByState inRequestMunicipalityByState) {
		LOGGER.logDebug("Start service execution REST: getMunicipalityByState");
		ResponseMunicipalityByState outResponseMunicipalityByState = new ResponseMunicipalityByState();

		if (!validateMandatory(new Data("stateId", inRequestMunicipalityByState.getStateId()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseMunicipalityByState = iServiceContractOperationsApiService
					.getMunicipalityByState(inRequestMunicipalityByState);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: getMunicipalityByState");
		return Response.ok(outResponseMunicipalityByState).build();

	}

	/**
	 * Find State By getStateByzipCode
	 */
	@POST
	@Path("/apiOperations/onboarding/getStateByzipCode")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response getStateByZipCode(StateByZipCodeRequest inStateByZipCodeRequest) {
		LOGGER.logDebug("Start service execution REST: getStateByZipCode");
		StateByZipCodeResponse outStateByZipCodeResponse = new StateByZipCodeResponse();

		if (!validateMandatory(new Data("zipCode", inStateByZipCodeRequest.getZipCode()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outStateByZipCodeResponse = iServiceContractOperationsApiService.getStateByZipCode(inStateByZipCodeRequest);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: getStateByZipCode");
		return Response.ok(outStateByZipCodeResponse).build();

	}

	/**
	 * View Customer Information
	 */
	@POST
	@Path("/apiOperations/enrollment/getUserEntityInformation")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response getUserEntityInformation(RequestGetUserEntityInformation inRequestGetUserEntityInformation) {
		LOGGER.logDebug("Start service execution REST: getUserEntityInformation");
		ResponseGetUserEntityInformation outResponseGetUserEntityInformation = new ResponseGetUserEntityInformation();

		if (!validateMandatory(
				new Data("externalCustomerId", inRequestGetUserEntityInformation.getExternalCustomerId()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("The request message is not properly formatted").build();
		}

		try {
			outResponseGetUserEntityInformation = iServiceContractOperationsApiService
					.getUserEntityInformation(inRequestGetUserEntityInformation);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: getUserEntityInformation");
		return Response.ok(outResponseGetUserEntityInformation).build();

	}

	/**
	 * Service to register beneficiaries for spei transfers.
	 */
	@POST
	@Path("/apiOperations/accounts/registerAccount")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response registerAccount(
			@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xRequestId,
			@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xEndUserRequestDateTime,
			@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xEndUserIp,
			@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xChannel,
			RequestRegisterAccountSpei inRequestRegisterAccountSpei) {
		LOGGER.logDebug("Start service execution REST: registerAccount");
		ResponseRegisterAccountSpei outResponseRegisterAccountSpei = new ResponseRegisterAccountSpei();

		if (!validateMandatory(
				new Data("accountNumberDestination", inRequestRegisterAccountSpei.getAccountNumberDestination()),
				new Data("accountNumber", inRequestRegisterAccountSpei.getAccountNumber()),
				new Data("typeDestinationId", inRequestRegisterAccountSpei.getTypeDestinationId()),
				new Data("externalCustomerId", inRequestRegisterAccountSpei.getExternalCustomerId()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseRegisterAccountSpei = iServiceContractOperationsApiService.registerAccount(xRequestId,
					xEndUserRequestDateTime, xEndUserIp, xChannel, inRequestRegisterAccountSpei);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: registerAccount");
		return Response.ok(outResponseRegisterAccountSpei).build();

	}

	/**
	 * Register Beneficiary Saving Account
	 */
	@POST
	@Path("/apiOperations/onboarding/registerBeneficiary")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response registerBeneficiary(
			@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xRequestId,
			@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xEndUserRequestDateTime,
			@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xEndUserIp,
			@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xChannel,
			RegisterBeneficiaryRequest inRegisterBeneficiaryRequest) {
		LOGGER.logDebug("Start service execution REST: registerBeneficiary");
		RegisterBeneficiaryResponse outRegisterBeneficiaryResponse = new RegisterBeneficiaryResponse();

		if (!validateMandatory(new Data("beneficiaries.lastName", inRegisterBeneficiaryRequest.getBeneficiaries()),
				new Data("beneficiaries.secondLastName", inRegisterBeneficiaryRequest.getBeneficiaries()),
				new Data("beneficiaries.street", inRegisterBeneficiaryRequest.getBeneficiaries()),
				new Data("beneficiaries.city", inRegisterBeneficiaryRequest.getBeneficiaries()),
				new Data("beneficiaries.zipcode", inRegisterBeneficiaryRequest.getBeneficiaries()),
				new Data("externalCustomerId", inRegisterBeneficiaryRequest.getExternalCustomerId()),
				new Data("beneficiaries.birthDate", inRegisterBeneficiaryRequest.getBeneficiaries()),
				new Data("beneficiaries.location", inRegisterBeneficiaryRequest.getBeneficiaries()),
				new Data("beneficiaries.names", inRegisterBeneficiaryRequest.getBeneficiaries()),
				new Data("beneficiaries.externalNumber", inRegisterBeneficiaryRequest.getBeneficiaries()),
				new Data("beneficiaries.internalNumber", inRegisterBeneficiaryRequest.getBeneficiaries()),
				new Data("account", inRegisterBeneficiaryRequest.getAccount()),
				new Data("beneficiaries.relationship", inRegisterBeneficiaryRequest.getBeneficiaries()),
				new Data("beneficiaries.colony", inRegisterBeneficiaryRequest.getBeneficiaries()),
				new Data("beneficiaries.percentage", inRegisterBeneficiaryRequest.getBeneficiaries()),
				new Data("beneficiaries.province", inRegisterBeneficiaryRequest.getBeneficiaries()),
				new Data("beneficiaries.phoneNumber", inRegisterBeneficiaryRequest.getBeneficiaries()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("The request message is not properly formatted").build();
		}

		try {
			outRegisterBeneficiaryResponse = iServiceContractOperationsApiService.registerBeneficiary(xRequestId,
					xEndUserRequestDateTime, xEndUserIp, xChannel, inRegisterBeneficiaryRequest);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: registerBeneficiary");
		return Response.ok(outRegisterBeneficiaryResponse).build();

	}

	/**
	 * Search Zip Code API
	 */
	@POST
	@Path("/apiOperations/onboarding/searchZipCode")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response searchZipCode(SearchZipCodeRequest inSearchZipCodeRequest) {
		LOGGER.logDebug("Start service execution REST: searchZipCode");
		SearchZipCodeResponse outSingleSearchZipCodeResponse = new SearchZipCodeResponse();

		if (!validateMandatory(new Data("zipCode", inSearchZipCodeRequest.getZipCode()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("The request message is not properly formatted").build();
		}

		try {
			outSingleSearchZipCodeResponse = iServiceContractOperationsApiService.searchZipCode(inSearchZipCodeRequest);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: searchZipCode");
		return Response.ok(outSingleSearchZipCodeResponse).build();

	}

	/**
	 * Update customer address
	 */
	@POST
	@Path("/apiOperations/customer/updateCustomerAddress")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response updateCustomerAddress(
			@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xRequestId,
			@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xEndUserRequestDateTime,
			@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xEndUserIp,
			@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xChannel,
			UpdateCustomerAddressRequest inUpdateCustomerAddressRequest) {
		LOGGER.logDebug("Start service execution REST: updateCustomerAddress");
		UpdateCustomerAddressResponse outUpdateCustomerAddressResponse = new UpdateCustomerAddressResponse();

		if (!validateMandatory(new Data("externalCustomerId", inUpdateCustomerAddressRequest.getExternalCustomerId()),
				new Data("addressTypeCode", inUpdateCustomerAddressRequest.getAddressTypeCode()),
				new Data("townCode", inUpdateCustomerAddressRequest.getTownCode()),
				new Data("city", inUpdateCustomerAddressRequest.getCity()),
				new Data("province", inUpdateCustomerAddressRequest.getProvince()),
				new Data("zipcode", inUpdateCustomerAddressRequest.getZipcode()),
				new Data("street", inUpdateCustomerAddressRequest.getStreet()),
				new Data("externalNumber", inUpdateCustomerAddressRequest.getExternalNumber()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outUpdateCustomerAddressResponse = iServiceContractOperationsApiService.updateCustomerAddress(xRequestId,
					xEndUserRequestDateTime, xEndUserIp, xChannel, inUpdateCustomerAddressRequest);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: updateCustomerAddress");
		return Response.ok(outUpdateCustomerAddressResponse).build();

	}

	/**
	 * Service to Update Profile
	 */
	@POST
	@Path("/apiOperations/enrollment/updateProfile")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response updateProfile(
			@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xRequestId,
			@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xEndUserRequestDateTime,
			@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xEndUserIp,
			@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xChannel,
			RequestUpdateProfile inRequestUpdateProfile) {
		LOGGER.logDebug("Start service execution REST: updateProfile");
		ResponseUpdateProfile outSingleResponseUpdateProfile = new ResponseUpdateProfile();

		if (!validateMandatory(new Data("externalCustomerId", inRequestUpdateProfile.getExternalCustomerId()),
				new Data("email", inRequestUpdateProfile.getEmail()),
				new Data("phoneNumber", inRequestUpdateProfile.getPhoneNumber()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("The request message is not properly formatted").build();
		}

		try {
			outSingleResponseUpdateProfile = iServiceContractOperationsApiService.updateProfile(xRequestId,
					xEndUserRequestDateTime, xEndUserIp, xChannel, inRequestUpdateProfile);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: updateProfile");
		return Response.ok(outSingleResponseUpdateProfile).build();

	}

	/**
	 * Transfer Spei
	 */
	@POST
	@Path("/apiOperations/transfer/transferSpei")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response transferSpei(
			@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xRequestId,
			@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xEndUserRequestDateTime,
			@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xEndUserIp,
			@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xChannel,
			RequestTransferSpi inRequestTransferSpi) {
		LOGGER.logDebug("Start service execution REST: transferSpei");
		ResponseTransferSpi outResponseTransferSpi = new ResponseTransferSpi();

		if (!validateMandatory(new Data("externalCustomerId", inRequestTransferSpi.getExternalCustomerId()),
				new Data("originAccountNumber", inRequestTransferSpi.getOriginAccountNumber()),
				new Data("destinationAccountNumber", inRequestTransferSpi.getDestinationAccountNumber()),
				new Data("amount", inRequestTransferSpi.getAmount()),
				new Data("bankId", inRequestTransferSpi.getBankId()),
				new Data("bankName", inRequestTransferSpi.getBankName()),
				new Data("destinationAccountOwnerName", inRequestTransferSpi.getDestinationAccountOwnerName()),
				new Data("destinationTypeAccount", inRequestTransferSpi.getDestinationTypeAccount()),
				new Data("commission", inRequestTransferSpi.getCommission()),
				new Data("referenceNumber", inRequestTransferSpi.getReferenceNumber()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseTransferSpi = iServiceContractOperationsApiService.transferSpei(xRequestId, xEndUserRequestDateTime,
					xEndUserIp, xChannel, inRequestTransferSpi);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: transferSpei");
		return Response.ok(outResponseTransferSpi).build();

	}

	/**
	 * Service for transfer to a third party account
	 */
	@POST
	@Path("/apiOperations/transfer/transferThirdPartyAccount")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response transferThirdPartyAccount(
			@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xRequestId,
			@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xEndUserRequestDateTime,
			@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xEndUserIp,
			@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xChannel,
			RequestTransferThirdPartyAccount inRequestTransferThirdPartyAccount) {
		LOGGER.logDebug("Start service execution REST: transferThirdPartyAccount");
		ResponseTransferThirdPartyAccount outResponseTransferThirdPartyAccount = new ResponseTransferThirdPartyAccount();

		if (!validateMandatory(
				new Data("externalCustomerId", inRequestTransferThirdPartyAccount.getExternalCustomerId()),
				new Data("originAccountNumber", inRequestTransferThirdPartyAccount.getOriginAccountNumber()),
				new Data("destinationNumber", inRequestTransferThirdPartyAccount.getDestinationNumber()),
				new Data("amount", inRequestTransferThirdPartyAccount.getAmount()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseTransferThirdPartyAccount = iServiceContractOperationsApiService.transferThirdPartyAccount(
					xRequestId, xEndUserRequestDateTime, xEndUserIp, xChannel, inRequestTransferThirdPartyAccount);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: transferThirdPartyAccount");
		return Response.ok(outResponseTransferThirdPartyAccount).build();

	}

	/**
	 * Update Account Beneficiary
	 */
	@POST
	@Path("/apiOperations/onboarding/updateAccountBeneficiary")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response updateAccountBeneficiary(
			@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xRequestId,
			@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xEndUserRequestDateTime,
			@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xEndUserIp,
			@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xChannel,
			UpdateBeneficiaryRequest inUpdateBeneficiaryRequest) {
		LOGGER.logDebug("Start service execution REST: updateAccountBebeficiary");
		UpdateBeneficiaryResponse outUpdateBeneficiaryResponse = new UpdateBeneficiaryResponse();

		if (!validateMandatory(new Data("externalCustomerId", inUpdateBeneficiaryRequest.getExternalCustomerId()),
				new Data("account", inUpdateBeneficiaryRequest.getAccount()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outUpdateBeneficiaryResponse = iServiceContractOperationsApiService.updateAccountBeneficiary(xRequestId,
					xEndUserRequestDateTime, xEndUserIp, xChannel, inUpdateBeneficiaryRequest);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: updateAccountBebeficiary");
		return Response.ok(outUpdateBeneficiaryResponse).build();

	}
	  
		/**
		 * Update Account Status
		 */
		@POST
		@Path("/apiOperations/onboarding/updateAccountStatus")
		@Consumes({ "application/json" })
		@Produces({ "application/json" })
		public Response updateAccountStatus(RequestUpdateAccountStatus inRequestUpdateAccountStatus) {
			LOGGER.logDebug("Start service execution REST: updateAccountStatus");
			ResponseUpdateAccountStatus outResponseUpdateAccountStatus = new ResponseUpdateAccountStatus();

			if (!validateMandatory(
					new Data("externalCustomerId", inRequestUpdateAccountStatus.getExternalCustomerId()),
					new Data("accountStatus", inRequestUpdateAccountStatus.getAccountStatus()),
					new Data("accountNumber", inRequestUpdateAccountStatus.getAccountNumber())
					)) {
				LOGGER.logDebug("400 is returned - Required fields are missing");
				return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
						.build();
			}

			try {
				outResponseUpdateAccountStatus = iServiceContractOperationsApiService
						.updateAccountStatus(inRequestUpdateAccountStatus);
			} catch (CTSRestException e) {
				LOGGER.logError("CTSRestException", e);
				if ("404".equals(e.getMessage())) {
					LOGGER.logDebug("404 is returned - No data found");
					return Response.status(404).entity("No data found").build();
				}

				LOGGER.logDebug("409 is returned - The stored procedure raise an error");
				return Response.status(409).entity(e.getMessageBlockList()).build();
			} catch (Exception e) {
				LOGGER.logDebug("500 is returned - Code exception");
				LOGGER.logError("Exception", e);
				return Response.status(500).entity(e.getMessage()).build();
			}

			LOGGER.logDebug("Ends service execution REST: updateAccountStatus");
			return Response.ok(outResponseUpdateAccountStatus).build();

		}

		/**
		 * Update Card Status
		 */
		@POST
		@Path("/apiOperations/customer/updateCardStatus")
		@Consumes({ "application/json" })
		@Produces({ "application/json" })
		public Response updateCardStatus(
				@NotNull(message = "x-request-id may not be null") @HeaderParam("x-request-id") String xRequestId,
				@NotNull(message = "x-end-user-request-date-time may not be null") @HeaderParam("x-end-user-request-date-time") String xEndUserRequestDateTime,
				@NotNull(message = "x-end-user-ip may not be null") @HeaderParam("x-end-user-ip") String xEndUserIp,
				@NotNull(message = "x-channel may not be null") @HeaderParam("x-channel") String xChannel,
				RequestUpdateCardStatus inRequestUpdateCardStatus) {
			LOGGER.logDebug("Start service execution REST: updateCardStatus");
			ResponseUpdateCardStatus outResponseUpdateCardStatus = new ResponseUpdateCardStatus();

			if (!validateMandatory(new Data("externalCustomerId", inRequestUpdateCardStatus.getExternalCustomerId()),
					new Data("cardStatus", inRequestUpdateCardStatus.getCardStatus()),
					new Data("typeCard", inRequestUpdateCardStatus.getTypeCard()))) {
				LOGGER.logDebug("400 is returned - Required fields are missing");
				return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
						.build();
			}

			try {
				outResponseUpdateCardStatus = iServiceContractOperationsApiService.updateCardStatus(xRequestId,
						xEndUserRequestDateTime, xEndUserIp, xChannel, inRequestUpdateCardStatus);
			} catch (CTSRestException e) {
				LOGGER.logError("CTSRestException", e);
				if ("404".equals(e.getMessage())) {
					LOGGER.logDebug("404 is returned - No data found");
					return Response.status(404).entity("No data found").build();
				}

				LOGGER.logDebug("409 is returned - The stored procedure raise an error");
				return Response.status(409).entity(e.getMessageBlockList()).build();
			} catch (Exception e) {
				LOGGER.logDebug("500 is returned - Code exception");
				LOGGER.logError("Exception", e);
				return Response.status(500).entity(e.getMessage()).build();
			}

			LOGGER.logDebug("Ends service execution REST: updateCardStatus");
			return Response.ok(outResponseUpdateCardStatus).build();

		}
	
	@POST
	@Path("/apiOperations/onboarding/validateCustomerIdentityCard")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response validateCustomerIdentityCard(
			RequestValidateCustomerIdentityCard inRequestValidateCustomerIdentityCard) {
		LOGGER.logDebug("Start service execution REST: validateCustomerIdentityCard");
		ResponseValidateCustomerIdentityCard outResponseValidateCustomerIdentityCard = new ResponseValidateCustomerIdentityCard();

		if (!validateMandatory(new Data("identityCard", inRequestValidateCustomerIdentityCard.getIdentityCard()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("The request message is not properly formatted").build();
		}

		try {
			outResponseValidateCustomerIdentityCard = iServiceContractOperationsApiService
					.validateCustomerIdentityCard(inRequestValidateCustomerIdentityCard);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: validateCustomerIdentityCard");
		return Response.ok(outResponseValidateCustomerIdentityCard).build();

	}

	/**
	 * Validate Identity
	 */
	@POST
	@Path("/apiOperations/onboarding/sendImagesToMati")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response validateIdentity(RequestValidateIdentity inRequestValidateIdentity) {
		LOGGER.logDebug("Start service execution REST: validateIdentity");
		ResponseValidateIdentity outResponseValidateIdentity = new ResponseValidateIdentity();

		if (!validateMandatory(new Data("type", inRequestValidateIdentity.getType()),
				new Data("imageAnverso", inRequestValidateIdentity.getImageAnverso()),
				new Data("imageReverso", inRequestValidateIdentity.getImageReverso()),
				new Data("imageDomicile", inRequestValidateIdentity.getImageDomicile()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("The request message is not properly formatted").build();
		}

		try {
			outResponseValidateIdentity = iServiceContractOperationsApiService
					.validateIdentity(inRequestValidateIdentity);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: validateIdentity");
		return Response.ok(outResponseValidateIdentity).build();

	}

	private class Data {
		private String name;
		private Object value;

		public Data(String name, Object value) {
			super();
			this.name = name;
			this.value = value;
		}

		public String getName() {
			return name;
		}

		public Object getValue() {
			return value;
		}
	}

	private boolean validateMandatory(Data... args) {
		boolean res = true;
		for (Data arg : args) {
			if (arg.getValue() == null) {
				LOGGER.logError("Attribute " + arg.getName() + " is null");
				res = false;
			}
		}
		return res;
	}

	/**
	 * Catalogue Of Locations
	 */
	@POST
	@Path("/apiOperations/onboarding/searchLocationCatalog")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response searchLocationCatalog(RequestSearchLocationCatalog inRequestSearchLocationCatalog) {
		LOGGER.logDebug("Start service execution REST: searchLocationCatalog");
		ResponseSearchLocationCatalog outResponseSearchLocationCatalog = new ResponseSearchLocationCatalog();

		if (!validateMandatory(new Data("city", inRequestSearchLocationCatalog.getCity()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseSearchLocationCatalog = iServiceContractOperationsApiService
					.searchLocationCatalog(inRequestSearchLocationCatalog);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: searchLocationCatalog");
		return Response.ok(outResponseSearchLocationCatalog).build();

	}

	/**
	 * Get Colony by Municipality
	 */
	@POST
	@Path("/apiOperations/onboarding/getColonyByMunicipality")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response getColonyByMunicipality(RequestGetColonyByMunicipality inRequestGetColonyByMunicipality) {
		LOGGER.logDebug("Start service execution REST: getColonyByMunicipality");
		ResponseGetColonyByMunicipality outResponseGetColonyByMunicipality = new ResponseGetColonyByMunicipality();

		try {
			outResponseGetColonyByMunicipality = iServiceContractOperationsApiService
					.getColonyByMunicipality(inRequestGetColonyByMunicipality);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: getColonyByMunicipality");
		return Response.ok(outResponseGetColonyByMunicipality).build();

	}

	/**
	 * Activate Device
	 */
	@POST
	@Path("/apiOperations/enrollment/deviceActivation")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response activateDevice(RequestDeviceActivation inRequestDeviceActivation) {
		LOGGER.logDebug("Start service execution REST: activateDevice");
		ResponseDeviceActivation outResponseDeviceActivation = new ResponseDeviceActivation();

		if (!validateMandatory(new Data("externalCustomerId", inRequestDeviceActivation.getExternalCustomerId()),
				new Data("phoneNumber", inRequestDeviceActivation.getPhoneNumber()),
				new Data("aliasDevice", inRequestDeviceActivation.getAliasDevice()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseDeviceActivation = iServiceContractOperationsApiService
					.activateDevice(inRequestDeviceActivation);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: activateDevice");
		return Response.ok(outResponseDeviceActivation).build();

	}

	/**
	 * Validate Device Activation
	 */
	@POST
	@Path("/apiOperations/enrollment/validateDeviceActivation")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response validateDeviceActivation(RequestValidateDeviceActivation inRequestValidateDeviceActivation) {
		LOGGER.logDebug("Start service execution REST: validateDeviceActivation");
		ResponseValidateDeviceActivation outResponseValidateDeviceActivation = new ResponseValidateDeviceActivation();

		if (!validateMandatory(
				new Data("externalCustomerId", inRequestValidateDeviceActivation.getExternalCustomerId()),
				new Data("phoneNumber", inRequestValidateDeviceActivation.getPhoneNumber()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseValidateDeviceActivation = iServiceContractOperationsApiService
					.validateDeviceActivation(inRequestValidateDeviceActivation);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: validateDeviceActivation");
		return Response.ok(outResponseValidateDeviceActivation).build();

	}

	/**
	 * Customer Card Application API
	 */
	@POST
	@Path("/apiOperations/customer/customerCardApplication")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response customerCardApplication(CardApplicationRequest inCardApplicationRequest) {
		LOGGER.logDebug("Start service execution REST: customerCardApplication");
		CardApplicationResponse outSingleCardApplicationResponse = new CardApplicationResponse();

		if(!validateMandatory(new Data("externalCustomerId", inCardApplicationRequest.getExternalCustomerId()))) {
        LOGGER.logDebug("400 is returned - Required fields are missing");
        return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado").build();
      }

		try {
			outSingleCardApplicationResponse = iServiceContractOperationsApiService
					.customerCardApplication(inCardApplicationRequest);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: customerCardApplication");
		return Response.ok(outSingleCardApplicationResponse).build();

	}

	/**
	 * Service to apply debit account
	 */
	@POST
	@Path("/apiOperations/accounts/debitOperation")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response debitOperation(DebitAccountRequest inDebitAccountRequest) {
		LOGGER.logDebug("Start service execution REST: debitOperation");
		DebitAccountResponse outSingleDebitAccountResponse = new DebitAccountResponse();

		if (!validateMandatory(new Data("externalCustomerId", inDebitAccountRequest.getExternalCustomerId()),
				new Data("accountNumber", inDebitAccountRequest.getAccountNumber()),
				new Data("amount", inDebitAccountRequest.getAmount()),
				new Data("referenceNumber", inDebitAccountRequest.getReferenceNumber()),
				new Data("debitReason", inDebitAccountRequest.getDebitReason()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outSingleDebitAccountResponse = iServiceContractOperationsApiService.debitOperation(inDebitAccountRequest);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: debitOperation");
		return Response.ok(outSingleDebitAccountResponse).build();

	}

	/**
	 * Get All Customer Questions
	 */
	@POST
	@Path("/apiOperations/questions/getAllCustomerQuestions")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response getAllCustomerQuestions(RequestAllCustomerQuestions inRequestAllCustomerQuestions) {
		LOGGER.logDebug("Start service execution REST: getAllCustomerQuestions");
		ResponseAllCustomerQuestions outResponseAllCustomerQuestions = new ResponseAllCustomerQuestions();

		if (!validateMandatory(new Data("externalCustomerId", inRequestAllCustomerQuestions.getExternalCustomerId()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseAllCustomerQuestions = iServiceContractOperationsApiService
					.getAllCustomerQuestions(inRequestAllCustomerQuestions);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: getAllCustomerQuestions");
		return Response.ok(outResponseAllCustomerQuestions).build();

	}
	
	/**
	 * Define Security Question and Answer
	 */
	@POST
	@Path("/apiOperations/questions/defineSecurityQA")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response defineSecurityQA(RequestDefineSecurityQA inRequestDefineSecurityQA) {
		LOGGER.logDebug("Start service execution REST: defineSecurityQA");
		ResponseDefineSecurityQA outResponseDefineSecurityQA = new ResponseDefineSecurityQA();

		if (!validateMandatory(new Data("externalCustomerId", inRequestDefineSecurityQA.getExternalCustomerId()),
				new Data("cstmrAnswer1", inRequestDefineSecurityQA.getCstmrAnswer1().getQuestionId()),
				new Data("cstmrAnswer1", inRequestDefineSecurityQA.getCstmrAnswer1().getAnswerId()),
				new Data("cstmrAnswer2", inRequestDefineSecurityQA.getCstmrAnswer2().getQuestionId()),
				new Data("cstmrAnswer2", inRequestDefineSecurityQA.getCstmrAnswer2().getAnswerId()),
				new Data("cstmrAnswer3", inRequestDefineSecurityQA.getCstmrAnswer3().getQuestionDescription()),
				new Data("cstmrAnswer3", inRequestDefineSecurityQA.getCstmrAnswer3().getAnswerDescription()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseDefineSecurityQA = iServiceContractOperationsApiService
					.defineSecurityQA(inRequestDefineSecurityQA);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: defineSecurityQA");
		return Response.ok(outResponseDefineSecurityQA).build();

	}
	
	/**
	 * Validate All Security Questions and Answers
	 */
	@POST
	@Path("/apiOperations/questions/validateAllSecurityQA")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response validateAllSecurityQA(RequestValidateAllSecurityQA inRequestValidateAllSecurityQA) {
		LOGGER.logDebug("Start service execution REST: validateAllSecurityQA");
		ResponseValidateAllSecurityQA outResponseValidateAllSecurityQA = new ResponseValidateAllSecurityQA();

		if (!validateMandatory(new Data("externalCustomerId", inRequestValidateAllSecurityQA.getExternalCustomerId()),
				new Data("cstmrVal1", inRequestValidateAllSecurityQA.getCstmrVal1().getQuestionId()),
				new Data("cstmrVal2", inRequestValidateAllSecurityQA.getCstmrVal2().getQuestionId()),
				new Data("cstmrVal3", inRequestValidateAllSecurityQA.getCstmrVal3().getCustomQuestionId()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outResponseValidateAllSecurityQA = iServiceContractOperationsApiService
					.validateAllSecurityQA(inRequestValidateAllSecurityQA);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: validateAllSecurityQA");
		return Response.ok(outResponseValidateAllSecurityQA).build();

	}

	/**
	 * Valdate token transaction factor API
	 */
	@POST
	@Path("/apiOperations/password/validateTransactionFactor")
	@Consumes({ "application/json" })
	@Produces({ "application/json" })
	public Response validateTransactionFactor(ValidateTokenRequest inValidateTokenRequest) {
		LOGGER.logDebug("Start service execution REST: validateTransactionFactor");
		ValidateTokenResponse outSingleValidateTokenResponse = new ValidateTokenResponse();

		if (!validateMandatory(new Data("externalCustomerId", inValidateTokenRequest.getExternalCustomerId()),
				new Data("token", inValidateTokenRequest.getToken()))) {
			LOGGER.logDebug("400 is returned - Required fields are missing");
			return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
					.build();
		}

		try {
			outSingleValidateTokenResponse = iServiceContractOperationsApiService
					.validateTransactionFactor(inValidateTokenRequest);
		} catch (CTSRestException e) {
			LOGGER.logError("CTSRestException", e);
			if ("404".equals(e.getMessage())) {
				LOGGER.logDebug("404 is returned - No data found");
				return Response.status(404).entity("No data found").build();
			}

			LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			return Response.status(409).entity(e.getMessageBlockList()).build();
		} catch (Exception e) {
			LOGGER.logDebug("500 is returned - Code exception");
			LOGGER.logError("Exception", e);
			return Response.status(500).entity(e.getMessage()).build();
		}

		LOGGER.logDebug("Ends service execution REST: validateTransactionFactor");
		return Response.ok(outSingleValidateTokenResponse).build();

	}

	/**
          * Service to Update Credentials
          */
        @POST
      @Path("/apiOperations/enrollment/updateCredentials")
      @Consumes({"application/json"})
      @Produces({"application/json"})
       public Response  updateCredentials(RequestUpdateCredentials inRequestUpdateCredentials ){
	  LOGGER.logDebug("Start service execution REST: updateCredentials");
      ResponseUpdateCredentials outSingleResponseUpdateCredentials  = new ResponseUpdateCredentials();
          
      if(!validateMandatory(new Data("externalCustomerId", inRequestUpdateCredentials.getExternalCustomerId()), new Data("userName", inRequestUpdateCredentials.getUserName()), new Data("password", inRequestUpdateCredentials.getPassword()), new Data("oldPassword", inRequestUpdateCredentials.getOldPassword()))) {
        LOGGER.logDebug("400 is returned - Required fields are missing");
        return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado").build();
      }
	    
      try {
      outSingleResponseUpdateCredentials=iServiceContractOperationsApiService.updateCredentials( inRequestUpdateCredentials );
      } catch (CTSRestException e) {
      LOGGER.logError("CTSRestException",e);
      if ("404".equals(e.getMessage())) {
      LOGGER.logDebug("404 is returned - No data found");
      return Response.status(404).entity("No data found").build();
      }

      LOGGER.logDebug("409 is returned - The stored procedure raise an error");
      return Response.status(409).entity(e.getMessageBlockList()).build();
      } catch (Exception e){
      LOGGER.logDebug("500 is returned - Code exception");
      LOGGER.logError("Exception",e);
      return Response.status(500).entity(e.getMessage()).build();
      }
      
          LOGGER.logDebug("Ends service execution REST: updateCredentials");
          return Response.ok(outSingleResponseUpdateCredentials).build();
        
      }

		/**
		 * Authorize Reversal Dock
		 */
		@POST
		@Path("/apiOperations/authorizations/reversal")
		@Consumes({ "application/json" })
		@Produces({ "application/json" })
		public Response authorizeReversalDock(@Null @HeaderParam("legacy-id") String legacyid,
				@NotNull(message = "client-id may not be null") @HeaderParam("client-id") String clientid,
				@NotNull(message = "uuid may not be null") @HeaderParam("uuid") String uuid,
				@NotNull(message = "x-apigw-api-id may not be null") @HeaderParam("x-apigw-api-id") String xapigwapiid,
				RequestAuthorizeReversalDock inRequestAuthorizeReversalDock) {
			LOGGER.logDebug("Start service execution REST: authorizeReversalDock");
			ResponseAuthorizeReversalDock outSingleResponseAuthorizeReversalDock = new ResponseAuthorizeReversalDock();
			//se realiza la implementacion interna para no tener que mover la orquestacion se divide la cadena 
			//del nuevo campo aditional_information, para ingresar al tokens 62 
			ArrayList<String> adtInf = aditionalData(inRequestAuthorizeReversalDock.getAdditional_information());
			if(adtInf != null && !adtInf.isEmpty())
			{
				inRequestAuthorizeReversalDock.setTokens_62(new Tokens_62());
				inRequestAuthorizeReversalDock.getTokens_62().setAffiliation_number(new BigDecimal(adtInf.get(0)));
				inRequestAuthorizeReversalDock.getTokens_62().setStore_number(new BigDecimal(adtInf.get(1)));
				inRequestAuthorizeReversalDock.getTokens_62().setPos_id(adtInf.get(2));
				inRequestAuthorizeReversalDock.getTokens_62().setCashier(adtInf.get(3));
				inRequestAuthorizeReversalDock.getTokens_62().setTransaction(adtInf.get(4));
				inRequestAuthorizeReversalDock.getTokens_62().setPinpad(adtInf.get(5));
			}
			if (!validateMandatory(
					new Data("mti", inRequestAuthorizeReversalDock.getMti()),
					new Data("nsu", inRequestAuthorizeReversalDock.getNsu()),
					new Data("card_entry", inRequestAuthorizeReversalDock.getCard_entry()),
					// values
					new Data("values.source_currency_code",
							inRequestAuthorizeReversalDock.getValues().getSource_currency_code()),
					new Data("values.billing_currency_code",
							inRequestAuthorizeReversalDock.getValues().getBilling_currency_code()),
					new Data("values.source_value", inRequestAuthorizeReversalDock.getValues().getSource_value()),
					new Data("values.billing_value", inRequestAuthorizeReversalDock.getValues().getBilling_value()),
					// original_transaction_data
					new Data("original_transaction_data.transaction_uuid",
							inRequestAuthorizeReversalDock.getOriginal_transaction_data().getTransaction_uuid()),
					new Data("original_transaction_data.nsu",
							inRequestAuthorizeReversalDock.getOriginal_transaction_data().getNsu()),
					new Data("original_transaction_data.mti",
							inRequestAuthorizeReversalDock.getOriginal_transaction_data().getMti()),
					new Data("original_transaction_data.institution_code",
							inRequestAuthorizeReversalDock.getOriginal_transaction_data().getInstitution_code()),
					new Data("original_transaction_data.retrieval_reference_number", inRequestAuthorizeReversalDock
							.getOriginal_transaction_data().getRetrieval_reference_number()),
					new Data("retrieval_reference_number", inRequestAuthorizeReversalDock.getRetrieval_reference_number()),
					new Data("processing", inRequestAuthorizeReversalDock.getProcessing())
					)) {
				LOGGER.logDebug("400 is returned - Required fields are missing");
				return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado")
						.build();
			}

			try {
				outSingleResponseAuthorizeReversalDock = iServiceContractOperationsApiService
						.authorizeReversalDock(legacyid, clientid, uuid, xapigwapiid, inRequestAuthorizeReversalDock);
			} catch (CTSRestException e) {
				LOGGER.logError("CTSRestException", e);
				if ("404".equals(e.getMessage())) {
					LOGGER.logDebug("404 is returned - No data found");
					return Response.status(404).entity("No data found").build();
				}

				LOGGER.logDebug("409 is returned - The stored procedure raise an error");
				return Response.status(409).entity(e.getMessageBlockList()).build();
			} catch (Exception e) {
				LOGGER.logDebug("500 is returned - Code exception");
				LOGGER.logError("Exception", e);
				return Response.status(500).entity(e.getMessage()).build();
			}

			LOGGER.logDebug("Ends service execution REST: authorizeReversalDock");
			return Response.ok(outSingleResponseAuthorizeReversalDock).build();

		}
		/**
         * Delete Contact
         */
     @POST
     @Path("/apiOperations/accounts/deleteContact")
     @Consumes({"application/json"})
     @Produces({"application/json"})
      public Response  deleteContact(RequestDeleteContact inRequestDeleteContact ){
	  LOGGER.logDebug("Start service execution REST: deleteContact");
     ResponseDeleteContact outResponseDeleteContact  = new ResponseDeleteContact();
         
     if(!validateMandatory(new Data("uniqueId", inRequestDeleteContact.getRegisterAccountId()))) {
       LOGGER.logDebug("400 is returned - Required fields are missing");
       return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado").build();
     }
	    
     try {
     outResponseDeleteContact=iServiceContractOperationsApiService.deleteContact( inRequestDeleteContact );
     } catch (CTSRestException e) {
     LOGGER.logError("CTSRestException",e);
     if ("404".equals(e.getMessage())) {
     LOGGER.logDebug("404 is returned - No data found");
     return Response.status(404).entity("No data found").build();
     }

     LOGGER.logDebug("409 is returned - The stored procedure raise an error");
     return Response.status(409).entity(e.getMessageBlockList()).build();
     } catch (Exception e){
     LOGGER.logDebug("500 is returned - Code exception");
     LOGGER.logError("Exception",e);
     return Response.status(500).entity(e.getMessage()).build();
     }
     
         LOGGER.logDebug("Ends service execution REST: deleteContact");
         return Response.ok(outResponseDeleteContact).build();
       
     }
     //funcion para dividir el objeto de datos adicionales
	 private  ArrayList<String> aditionalData(String additionalInformation)
	 {
 		String[] arrAdtInf = null;
 		
 		int max = 0;
 		if(additionalInformation != null)
 		{
 			arrAdtInf = additionalInformation.split("R");
 			max = arrAdtInf.length;
 		}
 		
 		ArrayList< String > lstAddInf = new ArrayList<String>();
 		for (int i = 1; i < max; i++)
 		{
 			lstAddInf.add(arrAdtInf[i].substring(3,arrAdtInf[i].length()));
 		}
 		return lstAddInf;
 		
	 }

	 /**
	  * Register Card Pan
	  */
	 @POST
	 @Path("/apiOperations/accounts/getUniqueId")
	 @Consumes({"application/json"})
	 @Produces({"application/json"})
	 public Response  getUniqueId(
			 //@NotNull(message = "x-request-id may not be null") 
			 @HeaderParam("x-request-id") String xrequestid,
			 //@NotNull(message = "x-end-user-request-date-time may not be null") 
			 @HeaderParam("x-end-user-request-date-time") String xenduserrequestdatetime,
			 //@NotNull(message = "x-end-user-ip may not be null") 
			 @HeaderParam("x-end-user-ip") String xenduserip,
			 //@NotNull(message = "x-channel may not be null") 
			 @HeaderParam("x-channel") String xchannel,

			 @NotNull(message = "WM_SEC_AUTH_TOKEN may not be null") 
			 @HeaderParam("WM_SEC_AUTH_TOKEN") String auth_token,

			 @NotNull(message = "WM_CONSUMER_ID may not be null") 
			 @HeaderParam("WM_CONSUMER_ID") String consumer_id,
			 
			 @NotNull(message = "LOGIN_SESSION_ID may not be null") 
			 @HeaderParam("LOGIN_SESSION_ID") String loginsession_id,

			 @NotNull(message = "WM_QOS_CORRELATION_ID may not be null") 
			 @HeaderParam("WM_QOS_CORRELATION_ID") String wmqos_correlationId,
			 
			 @NotNull(message = "WM_SVC_NAME may not be null") 
			 @HeaderParam("WM_SVC_NAME") String wmsvc_name,
			 
			 @NotNull(message = "WM_SVC_ENV may not be null") 
			 @HeaderParam("WM_SVC_ENV") String wmsvc_env,
			 
			 @NotNull(message = "WM_CONSUMER_ID may not be null") 
			 @HeaderParam("CUSTOMER_ID") String customer_id,
			 
			 //@NotNull(message = "x_wm_sec.auth_signature may not be null") 
			 //@HeaderParam("x_wm_sec.auth_signature") String wmsec_authsignature,
			 
			 //@NotNull(message = "x_wm_consumer.intimestamp may not be null") 
			 //@HeaderParam("x_wm_consumer.intimestamp") String wmconsumer_intimestamp,
			 
			/* @NotNull(message = "WM_SEC.KEY_VERSION may not be null") 
			 @HeaderParam("WM_SEC.KEY_VERSION") String wmsec_keyversion,*/
			 
			 @NotNull(message = "DEVICE_PLATFORM may not be null") 
			 @HeaderParam("DEVICE_PLATFORM") String device_platform,
			 
			 @NotNull(message = "DEVICE_APP_VERSION may not be null") 
			 @HeaderParam("DEVICE_APP_VERSION") String deviceapp_version,
			 
			 @NotNull(message = "DEVICE_FINGERPRINT may not be null") 
			 @HeaderParam("DEVICE_FINGERPRINT") String device_fingerprint,
			 
			 @NotNull(message = "DEVICE_ENVIRONMENT_HEALTHY may not be null") 
			 @HeaderParam("DEVICE_ENVIRONMENT_HEALTHY") String device_environmenthealthy,
			 
			 @NotNull(message = "DEVICE_OS_VERSION may not be null") 
			 @HeaderParam("DEVICE_OS_VERSION") String deviceos_version,
			 
			 @NotNull(message = "DEVICE_MANUFACTURER may not be null") 
			 @HeaderParam("DEVICE_MANUFACTURER") String device_manufacturer,
			 
			 //@NotNull(message = "x_flow_name may not be null") 
			 //@HeaderParam("x_flow_name ") String flow_name,      		     		

			 RequestRegisterCardPan inRequestRegisterCardPan ){
		 LOGGER.logDebug("Start service execution REST: getUniqueId");
		 ResponseRegisterCardPan outResponseRegisterCardPan  = new ResponseRegisterCardPan();

		 if(!validateMandatory(new Data("cardNumber", inRequestRegisterCardPan.getCardNumber()))) {
			 LOGGER.logDebug("400 is returned - Required fields are missing");
			 //return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado").build();

			 ResponseError outResponseError = new ResponseError();
			 outResponseError.setMessage("Error occurred while processing the request");

			 ErrorDescription[] errors = new ErrorDescription[1];
			 ErrorDescription error = new ErrorDescription();
			 error.setCode("BCS-BA-9001");
			 error.setDescription("Unauthorised User");
			 errors[0] = error;
			 
			 outResponseError.setErrors(errors);

			 return Response.status(400).entity(outResponseError).build();
		 }

		 Map<String,String> headersIntegracion = new HashMap<String, String>();
		 headersIntegracion.put("LOGIN_SESSION_ID", loginsession_id);
		 headersIntegracion.put("CUSTOMER_ID", customer_id);		 
		 headersIntegracion.put("correlation", wmqos_correlationId);
		 headersIntegracion.put("svc_name", wmsvc_name);
		 headersIntegracion.put("envi_svc", wmsvc_env);
		 headersIntegracion.put("consumer_id", consumer_id);
		 //headersIntegracion.put("WM_SEC.AUTH_SIGNATURE", wmsec_authsignature);
		 //headersIntegracion.put("WM_CONSUMER.INTIMESTAMP", wmconsumer_intimestamp);
		 //headersIntegracion.put("WM_SEC.KEY_VERSION", wmsec_keyversion);
		 headersIntegracion.put("DEVICE_PLATFORM", device_platform);
		 headersIntegracion.put("DEVICE_APP_VERSION", deviceapp_version);
		 headersIntegracion.put("DEVICE_FINGERPRINT", device_fingerprint);
		 headersIntegracion.put("DEVICE_ENVIRONMENT_HEALTHY", device_environmenthealthy);
		 headersIntegracion.put("DEVICE_OS_VERSION", deviceos_version);
		 headersIntegracion.put("DEVICE_MANUFACTURER", device_manufacturer);
		 LOGGER.logDebug("JCOS XDX");
		 LOGGER.logDebug(wmqos_correlationId);
		 //headersIntegracion.put("FLOW_NAME", flow_name);

		 /*if (LOGGER.isDebugEnabled()) {
			 LOGGER.logDebug("Valores recibidos en " + this.getClass().getName());
			 for (Map.Entry<String, String> entry : headersIntegracion.entrySet()) {
				 String key = entry.getKey();
				 String value = entry.getValue();
				 LOGGER.logDebug(String.format("Header: %s = %s", key, value));
			 }
		 }*/

		 try {
			 outResponseRegisterCardPan=iServiceContractOperationsApiService.getUniqueId(xrequestid, xenduserrequestdatetime, xenduserip, xchannel, auth_token, headersIntegracion, inRequestRegisterCardPan );
		 } catch (CTSRestException e) {
			 LOGGER.logError("CTSRestException",e);
			 if ("404".equals(e.getMessage())) {
				 LOGGER.logDebug("404 is returned - No data found");
				 return Response.status(404).entity("No data found").build();
			 }

			 LOGGER.logDebug("409 is returned - The stored procedure raise an error");
			 return Response.status(409).entity(e.getMessageBlockList()).build();
		 } catch (Exception e){
			 LOGGER.logDebug("500 is returned - Code exception");
			 LOGGER.logError("Exception",e);
			 return Response.status(500).entity(e.getMessage()).build();
		 }
		 
		 
		 /*SALIDA DE ERROR*/
		 
		 if(outResponseRegisterCardPan==null || outResponseRegisterCardPan.getResponse().getCode()>0) {
		 
		 LOGGER.logDebug("400 is returned - Required fields are missing");
		 //return Response.status(400).entity("El mensaje de solicitud no se encuentra debidamente formateado").build();

		 ResponseError outResponseError = new ResponseError();
		 outResponseError.setMessage("Error occurred while processing the request");

		 ErrorDescription[] errors = new ErrorDescription[1];
		 ErrorDescription error = new ErrorDescription();
		 error.setCode("BCS-BA-9001");
		 error.setDescription("Unauthorised User");
		 errors[0] = error;
		 
		 outResponseError.setErrors(errors);

		 return Response.status(400).entity(outResponseError).build();
		 }
		 
		 /*FIN SALIDA DE ERROR*/
		 
		 

		 LOGGER.logDebug("Ends service execution REST: registerCardPan");
		 LOGGER.logDebug("Ends service execution REST: outResponseRegisterCardPan: " + 
		 "Response: " + String.valueOf(outResponseRegisterCardPan.getResponse()) +
		 "UniqueID: " + String.valueOf(outResponseRegisterCardPan.getUniqueId()));
		 return Response.ok(outResponseRegisterCardPan).build();

	 }

}
